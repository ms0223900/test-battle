{"version":3,"sources":["game/items/itemsContainer.js","functions.js","singleQA.js","TestPaper.js","selectDatabase.js","game/gameObj.js","game/gameConfig.js","game/gameFunc.js","game/gameLib.js","game/components/Icon.js","game/shop/shopIcon.js","game/components/effectNumberPopup.js","game/items/itemsBG.js","game/mainGameUI/mainUIGameIcons.js","game/mainGameUI/statusBar.js","game/mainGameUI/mainUIContainer.js","game/items/itemsActions.js","game/components/countDownTimer.js","game/components/chracter.js","game/shop/shopContainer.js","game/shop/shopBG.js","game/shop/shopTabs.js","game/gameComponents.js","game/Layers.js","game/shop/shopActions.js","game/tapActionsHolder.js","game/mainGameUI/mainUI_actions.js","avatar.js","config.js","createQA.js","Timer.js","lang.js","game/components/HiddenTestPaper.jsx","App.js","serviceWorker.js","index.js"],"names":["x","y","genRandom","amount","min","max","randomArr","count","Min","maxCount","Math","abs","amountOfNum","random","indexOf","setValueOfArrObj","arrObj","id","targetAttr","value","ID","arrObjLength","length","tarObj","filter","a","arrObjOnlyId","map","arr","tarIndex","valuedObj","slice","getAllOrStarData","star","allData","isRandom","starData","d","Length","resultArr","i","activeButton","compareId","btnId","activeStyle","backgroundColor","color","normalStyle","filterArrWithProperty","targetArr","filterArr","property","filteredArr","fi","filterArrObjWithArr","filterItOrNot","getNoSameArr","result","convert1234ToABCD","val","lastStr","search","convertSecToMin","time","sec","convertToStr","minSec","toString","handleBlockLineBreak","breakLimit","yDis","containerWidth","elementWidth","xSpacing","ABCDOptions","getDataFromLocalStorage","setDefaultData","noteContext","localStorage","getItem","setItem","JSON","stringify","allIdData","parse","thatIdData","ls","setDataToLocalStorage","prop","data","originLS","HOCwithHint","Component","hint","className","hinted","props","this","isActive","React","SingleQA_WithButton","_handleOpenNote","setState","isNoteOpen","state","changeAnswer","myAnswer","question","options","isHandIn","isCheckCorrectAns","openNote","SingleQA","componentWillMount","componentDidMount","questionNote","focus","_handleEditNote","e","target","_handleOptionTitle","optionTitle","getAttribute","yourAnswer","thisAnswer","withABCDoptions","ABCD","genOptionsWithABCD","answer","correctAns","allAns","index","getOptionABCDFromAns","correctAnswer","correctAnswerWithABCD","onChange","onSubmit","preventDefault","checked","op","key","type","name","disabled","style","display","placeholder","ref","el","onClick","StarButton","starFn","icon","NoteButton","isEditNote","note","noteFn","window","alert","width","StarWithHint","NoteWithHint","DataButtons","setDataFromLS","thisData","componentDidUpdate","prevProps","prevState","_handleStar","PureComponent","DownloadJSONLink","obj","clickFn","jsonStr","encodeURIComponent","href","ScorePanel","allQA","getAnswerLength","my","WholeTestPaper","testQA","checkAnswer","checkCorrectAnswer","qa","Fragment","SingleTestPaper","singleAnswerModeState","thisQA","idArr","SelectDatabase","setToDefault","optionDefault","allTestFilterConditions","onInput","changeSelect","all","SelectMenuBar","_handleChangeSelect","selectedArr","_handleDeleteSelect","console","log","deletedArr","s","nowFIlterCondition","changeSelectDatabase","deleteSelectDatabase","now","bigCoin","coinUpdate","testUIbuttonImage","alertTest","ICON","ICON2","character","testMapIcon","testBackArr","freeIcon","initGameConfig","layer","objProp","canvasSpec","canvasObjAreaSpec","height","ShopIconConfig","posId","imgSrc","ShopUIConfig","backGround","iconDist","getTRBL","t","l","b","h","r","w","checkCollideWithPoint","point","collideObj","groupDisplay","includes","getCanvasComponent","spec","drawClass","drawStaticImg","ratio","status","opacity","cloneId","OBJ","imgRatio","getCanvasGroup","drawGroupClass","myGroupObjs","groupObjs","destroyObj","originObjs","o","getTap","canvas","layerInstanse","actionFn","allCloneAction","tapX","targetTouches","clientX","tapY","clientY","posX","getBoundingClientRect","left","posY","top","tapPos","getTapObj","getLayerObjByIdCloneId","layerObjs","layerOBJs","allClone","resLayerObjs","checkResult","res","drawRect","fillStyle","strokeStyle","translateXY","attr","ctx","save","fillRect","fill","stroke","restore","drawOnCanvas","draw","drawUIText","textConfig","text","lineHeight","textAlignCenter","textBreak","breakText","fontSize","font","textSplit","split","txtSplitWidth","measureText","textArr","textWidthArr","j","resBreak","tempWidthArr","getBreakComponent","handleTextAlignCenter","handleTextBreak","fillText","image","Image","src","speed","dir","bounceStart","bounceState","bounceTimes","bounceLimit","bounceNow","bounceDirec","statusName","img","originXY","bounce","keyCode","distanceX","distanceY","collideRes","wallW","wallH","objSpec","checkCollideWithWalls","distX","distY","IMG","bounceLoop","globalAlpha","drawImage","drawSpriteImg","frameRate","imgIndex","imgTick","actionsFn","updateFrame","groupXY","actionUpObj","upAction","posYTick","posYIndex","groupRatio","setToGroupXY","setObjInGroup","hasOwnProperty","singleOrAll","singleIndex","setGroupAttr","setAttr","render","myGame","myLayers","getContext","UIstate","moneyBagCount","BackLayer","ObjLayer","UILayer","undefined","testNum","setIdActions","bind","frame","prev","fps","orginGameSpawnObj","spawnObjToLayer","objFn","gameComponents","pos","useRandom","isInit","isUI","setInterval","stateObj","stateTree","layerName","isArray","container","num","init","originObj","resultVal","storeData","newObjs","objFnParas","selfDestroy","destroyTime","gameLayer","newObj","getRandXY","Obj","getCanvasRandPos","newPosObj","originGroupObjs","amountOfCloneObj","lo","newCloneId","newAddedObj","go","setTimeout","objId","setLayerObjs","IDs","cursor","setPointer","layerNames","layers","tapAct","fn","paras","parameters","clearRect","requestAnimationFrame","Container","containerStates","containerGroup","setContainerState","newState","updateComponents","subscribedComponents","containerStateToFilter","attrId","con","propName","countPropName","countUnit","origin","filterProp","it","originCount","newCount","gro","Icon","drawNumberCountTest","updateWithProps","ShopCount","ShopIcon","iconImgSrc","iconCount","effectNumberPopUp","opacityRate","pop","limit","originY","popUp","operation","MyItemsContainer","items","itemsBG","ShopOpenIcon","ItemOpenIcon","HealthIcon","PowerIcon","SmartIcon","Bar","updateLength","BarStatusCountText","updateCountText","barRect","barColor","statusCount","StatusBar","HealthBar","PowerBar","SmartBar","barState","bar","mainContainerGroup","SHOPICON","updateHealthBar","mainUIContainer","updateCount","consumeItems","gameInstanse","getContainerAttr","removeObjInContainer","TimeText","prevTime","countDownTime","convertTime","TimeRect","timeRectType","maxWidth","setWidthByTimeAndType","timerRectBG","timerRectActive","Timer","popUpObjs","updateFns","timer","newTime","handleChangeByTime","resetPopUpObjs","clearInterval","checkTimer","wallInit","WanderingObj","wall","vx","vy","acceleration","ax","ay","get","nextPos","acc","objTRBL","wallTRBL","leftCondition","rightCondition","topCondition","bottomCondition","checkObjInsideCollideWithWall","move","colliderRes","checkCollide","wander","backW","backH","backImgSrc","shopItems","itemsId","groupYDis","itemsStartPos","shopIcons","xy","config","iconConfig","shopItems1","shopItems2","CloseIcon","ShopBG","ShopBG_B","ObjTimer","objsInTimer","DefaultTimer","EffectNumberPopup","subscribeIds","MyShopContainer","countNumObj","countNum","mergeStates","arrObjs","LENGTHs","mergeArrObjs","st","shopContainerGroup","fontStyle","sSize","mSize","countUIText","actionUpGroupObjs","upPosY","testButton","userCharacter","moneyBag","moneys","upCoin","Coin","backTest","OKIcon","cancelIcon","alertBack","testPicBack","ShoppingList","alertPurchase","moneyUIwithText","alertUI","testMAP","testGroupMap","te","myLayer","allLayer","testCount","TABs","tab","buyItems","ICONconfig","isExist","checkObjExist","numberPos","getAttr","containerObjsLength","popUpNumber","switchTabs","tabs","targetTabId","targetItemId","tapActionHolder","gameInstance","purchaseCoinUprade","removeObjFromLayer","alertUIActions","originX","shopUIActions","ItemsContainerGroupDisplay","mainUIActions","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","database","library","add","faMinusCircle","SingleOption","changeFn","choice","DeleteQuestionWithHint","deleteQuestion","SingleCreateQA","option","CreateQAPanel","oldData","lastIdOfOldData","getTempSave","createQAData","_handleChange","dataID","optionID","optionData","_handleChangeDatabaseName","_handleAddQuestion","latestData","qaPlate","bottom","scrollIntoView","behavior","_handleDeleteQuestion","afterThisData","c","afterDataMinusOne","af","beforeThisData","_handleChangeAnswer","valueWithCovert","toUpperCase","valueLength","lengthCondition","handledValue","_resetCreateQA","confirm","_checkAmoutOfQA","answerLength","replace","checkAnyOfObjArrIsEmpty","objArr","innerResult","Array","setCoin","convertDataToJSON","resultJSON","set","ob","re","addAnswerResult","answerArr","ABCDArr","toLowerCase","convertABCDtoNum","databaseSort","idNum","tagName","values","someone","intl","formatMessage","cr","answerContainer","injectIntl","resetTime","isStart","_handleTimerStartPause","timerFn","overAndCheckAns","timerStartPause","isCountDown","classes","Paper","elevation","paper","Button","variant","aria-label","button","Typography","component","withStyles","margin","verticalAlign","padding","textAlign","en_US","hello","superHello","createQA","bigTitle","zh_TW","HiddenTestPaper","Box","faStar","faEdit","faArrowRight","faPlusCircle","getRandomId","prevId","filterCorrectAns","ans","ChangeModeBTN","stateOfMode","btnText","filterText","TabMenu","testModeState","testModeFn","answerModeState","answerModeFn","testAmount","changeAmountFn","paddingY","App","on","LSdata","setData","Q","q","allTestQA","filterAllTestQA","coin","latestNoteContent","noteContent","setTestRecord","testRecord","lastRecord","checkedAnswer","testId","testDataRecord","ansArr","_handleSetCoin","resultCoin","_handleChangeAnswerMode","mode","answerMode","viewMyNote","_handleChangeNote","_handleChangeMode","testMode","_handleTestPaper","testQAdata","testQAData","recordFromLS","recordQuestions","filterWithRecordArr","filteredTestQAByRecord","getDataByMode","keyId","_handleCheckAnswer","isOver","singleAnswerModeId","m","_handleToNextQuestion","changedAns","_handleChangeAmout","_handleCheckCorrectAnswer","nextIndex","_handleChangeSelectDatabase","singleFilterResult","testFilterResult","_handleDeleteSelectDatabase","f","filterResult","_handleViewTestRecord","thatId","filterRecord","_handleTimerStart","_handleBuying","price","resCoin","testRecordTemp","noteArea","changeLang","HOCIntlApp","chooseLang","lang","_handleChangeLang","locale","messages","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.45ad0439.chunk.js","sourcesContent":["import { getCanvasGroup } from '../gameFunc'\r\nimport { Container } from '../gameLib'\r\n// import { mergeArrObjs } from '../gameFunc'\r\nimport itemsBG from './itemsBG'\r\n\r\nexport const ItemsContainerGroup = (x, y) => {\r\n  return getCanvasGroup({\r\n    id: 'ItemsContainer',\r\n    spec: [x, y],\r\n    groupObjs: [\r\n      itemsBG,\r\n    ]\r\n  })\r\n}\r\n\r\nexport class ItemsContainer extends Container {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  updateComponents() {\r\n    const { items } = this.containerStates\r\n    if(items.length > 0) {\r\n      items.map(it => this.setAttr(it.id, 0, 'count', it.count))\r\n    }\r\n    \r\n  }\r\n}\r\nexport const MyItemsContainer = new ItemsContainer({\r\n  containerStates: { items: [] },\r\n  containerGroup: ItemsContainerGroup(30, 100),\r\n})","export const genRandom = (amount=1, min=1, max=10) => {\r\n  let randomArr = []\r\n  let count = 0\r\n  const Min = max >= min ? min : max\r\n  const maxCount = Math.abs(max - min) + 1\r\n  const amountOfNum = amount > maxCount ? maxCount : amount\r\n  while(count < amountOfNum) {\r\n    let random = Min + ~~(Math.random() * maxCount)\r\n    while(randomArr.indexOf(random) === -1) {\r\n      randomArr = [...randomArr, random]\r\n      count = count + 1\r\n    }\r\n  }\r\n  return randomArr\r\n}\r\n\r\nexport const setValueOfArrObj = (arrObj=[], id='', targetAttr='', value='') => {\r\n  const ID = id * 1\r\n  const arrObjLength = arrObj.length\r\n  const tarObj = arrObj.filter(a => a.id === ID)[0]\r\n  const arrObjOnlyId = arrObj.map(arr => arr = arr.id)\r\n  const tarIndex = arrObjOnlyId.indexOf(ID)\r\n  const valuedObj = { ...tarObj, [targetAttr]: value\r\n  }\r\n  if(tarIndex === 0) {\r\n    return [\r\n      valuedObj,\r\n      ...arrObj.slice(1,arrObjLength)\r\n    ]\r\n  } else if(tarIndex === arrObjLength) {\r\n    return [\r\n      ...arrObj.slice(0, arrObjLength - 1),\r\n      valuedObj\r\n    ]\r\n  } else {\r\n    return [\r\n      ...arrObj.slice(0, tarIndex),\r\n      valuedObj,\r\n      ...arrObj.slice(tarIndex + 1, arrObjLength)\r\n    ]\r\n  }\r\n}\r\n\r\nexport const genArr = (num=10, from0or1=0) => {\r\n  let arr = []\r\n  let i = from0or1 === 0 ? 0 : 1\r\n  while(i < num) {\r\n    arr = [...arr, i]\r\n    i += 1\r\n  }\r\n  return arr\r\n}\r\n\r\nexport const getAllOrStarData = (star=false, amount=10, allData=[], isRandom=false) => {\r\n  const starData = allData.filter(d => d.star)\r\n  const Length = (length) => length > 1 ? length : 1\r\n  let resultArr = []\r\n  const randomArr = star ? \r\n    genRandom(amount, 0, Length(starData.length) - 1) : \r\n    genRandom(amount, 0, Length(allData.length) - 1)\r\n  if(isRandom) {\r\n    for (const i of randomArr) {\r\n      resultArr = star ? \r\n        [...resultArr, starData[i]] : [...resultArr, allData[i]]\r\n    }\r\n  }else {\r\n    resultArr = star ? starData.slice(0, amount) : allData.slice(0, amount)\r\n  }\r\n  return typeof(resultArr[0]) === 'undefined' ? [] : resultArr \r\n}\r\n\r\nexport const activeButton = (compareId='' , btnId='') => {\r\n  const activeStyle = {\r\n    backgroundColor: '#111', color: '#fff',\r\n  }\r\n  const normalStyle = {\r\n    backgroundColor: '#ddd', color: '#111'\r\n  }\r\n  return compareId === btnId ? activeStyle : normalStyle\r\n}\r\nexport const genOptionsWithABCD = (options) => {\r\n  let arr = []\r\n  const ABCD = ['A', 'B', 'C', 'D', 'E']\r\n  for (let i = 0; i < options.length; i++) {\r\n    arr[i] = {\r\n      id: ABCD[i],\r\n      options: options[i]\r\n    }\r\n  }\r\n  return arr\r\n}\r\n\r\nexport const filterArrWithProperty = (targetArr=[], filterArr=[], property='') => {\r\n  let resultArr = []\r\n  for (let i = 0; i < targetArr.length; i++) {\r\n    const filteredArr = filterArr.filter(fi => fi[property] === targetArr[i][property])[0]\r\n    if(typeof(filteredArr) === 'object') {\r\n      resultArr = [...resultArr, filteredArr[property]] \r\n    }\r\n  }\r\n  return resultArr\r\n}\r\nexport const filterArrObjWithArr = (arrObj=[{}], arr=[], property='', filterItOrNot=false) => {\r\n  let resultArr = []\r\n  for (let i = 0; i < arrObj.length; i++) {\r\n    // if filterItOrNot is true, it should abort the matched arrObj\r\n    if(filterItOrNot ? arr.indexOf(arrObj[i][property]) === -1 : arr.indexOf(arrObj[i][property]) !== -1) {\r\n      resultArr = [...resultArr, arrObj[i]]\r\n    }\r\n  }\r\n  return resultArr\r\n}\r\nexport const convertABCDtoNum = (ABCD='A') => {\r\n  const ABCDArr = [\r\n    { ABCD: 'A', num: 0, },\r\n    { ABCD: 'B', num: 1, },\r\n    { ABCD: 'C', num: 2, },\r\n    { ABCD: 'D', num: 3, },\r\n    { ABCD: 'E', num: 4, },\r\n  ]\r\n  return ABCDArr.filter(a => a.ABCD.toUpperCase() === ABCD || a.ABCD.toLowerCase() === ABCD)[0].num\r\n}\r\nexport const checkAnyOfObjArrIsEmpty = (objArr=[{ id: 0, }]) => {\r\n  let innerResult = []\r\n  for (let i = 0; i < objArr.length; i++) {\r\n    for (const j in objArr[i]) {\r\n      if(objArr[i][j] === '') {\r\n        return false\r\n      } else if(Array.isArray(objArr[i][j])) {\r\n        if(typeof(objArr[i][j][0]) === 'object') {\r\n          innerResult =  [...innerResult, checkAnyOfObjArrIsEmpty(objArr[i][j])]\r\n        } else if(objArr[i][j].indexOf('' !== -1)) {\r\n          return false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  if(innerResult.indexOf(false) === -1) {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n} \r\nexport const getNoSameArr = (arr) => {\r\n  let result = []\r\n  for (let i = 0; i < arr.length; i++) {\r\n    if(result.indexOf(arr[i]) === -1) {\r\n      result = [...result, arr[i]]\r\n    }\r\n  }\r\n  return result\r\n}\r\nexport const convert1234ToABCD = (val) => {\r\n  const NUM = ['1', '2', '3', '4']\r\n  const ABCD = ['A', 'B', 'C', 'D']\r\n  const lastStr = val.slice(val.length - 1)\r\n  if(lastStr.search(/[1|2|3|4]$/gi, '') !== -1) {\r\n    return val.slice(0, val.length - 1) + ABCD[NUM.indexOf(lastStr)]\r\n  }\r\n}\r\nexport const convertSecToMin = (time=10) => {\r\n  const min = ~~(time / 60)\r\n  const sec = time % 60\r\n  const convertToStr = (minSec) => (\r\n    minSec < 10 ? '0' + minSec : minSec.toString()\r\n  )\r\n  return [convertToStr(min), convertToStr(sec)]\r\n}\r\nexport const getReverseResult = (now, min, max, dir, unit=1) => {\r\n  const newNow = now < max && dir ? now + unit : now - unit\r\n  if(now >= max) {\r\n    dir = false\r\n  } else if(now - unit <= min) {\r\n    dir = true\r\n  }\r\n  return {\r\n    now: newNow,\r\n    dir: dir\r\n  }\r\n}\r\nexport const handleBlockLineBreak = (id=0, breakLimit=3, yDis=20, containerWidth=100, elementWidth=20, ) => {\r\n  const xSpacing = (containerWidth - elementWidth * breakLimit) / (breakLimit * 2)\r\n  const x = (id % breakLimit) * (containerWidth / breakLimit) + xSpacing\r\n  const y = ~~( id / breakLimit ) * yDis\r\n  return { x, y }\r\n}","/* eslint-disable no-unused-vars */\r\nimport React, { Fragment } from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { setValueOfArrObj, genOptionsWithABCD } from './functions'\r\nimport { styles } from './config'\r\nconst { starBTN } = styles\r\n\r\nconst ABCDOptions = ['A', 'B', 'C', 'D', 'E', 'F']\r\n\r\nexport const getDataFromLocalStorage = (id) => {\r\n  const setDefaultData = {\r\n    id: id,\r\n    star: false,\r\n    noteContext: '',\r\n  }\r\n  if(!localStorage.getItem('starAndNote')) {\r\n    localStorage.setItem('starAndNote', JSON.stringify([]))\r\n  }\r\n  const allIdData = JSON.parse(localStorage.getItem('starAndNote'))\r\n  const thatIdData = allIdData.filter(ls => ls.id === id)[0]\r\n  if(thatIdData) {\r\n    return thatIdData\r\n  } else {\r\n    localStorage.setItem('starAndNote', JSON.stringify([...allIdData, setDefaultData]))\r\n    return setDefaultData\r\n  }\r\n}\r\nexport const setDataToLocalStorage = (id, prop, data) => {\r\n  const originLS = JSON.parse(localStorage.getItem('starAndNote'))\r\n  localStorage.setItem('starAndNote', JSON.stringify(setValueOfArrObj(originLS, id, prop, data)))\r\n}\r\nexport const getOptionABCDFromAns = (correctAns='', allAns=[]) => {\r\n  const index = allAns.indexOf(correctAns)\r\n  return ABCDOptions[index]\r\n}\r\nexport const HOCwithHint = (Component, hint='I am hint!', className='', hinted='') => class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render() {\r\n    const { isActive=false } = this.props\r\n    return (\r\n      <div className={`component-withHint ${className}`}>\r\n        <Component {...this.props} />\r\n        <div className='hint-dialog'>\r\n          {isActive ? hinted : hint}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport class SingleQA_WithButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isNoteOpen: false,\r\n    };\r\n  }\r\n  _handleOpenNote = () => {\r\n    this.setState({\r\n      isNoteOpen: !this.state.isNoteOpen\r\n    })\r\n  }\r\n  render() {\r\n    const { id, changeAnswer, myAnswer, question, options, isHandIn, isCheckCorrectAns } = this.props\r\n    return (\r\n      <Fragment>\r\n        <DataButtons\r\n          id={id}\r\n          isHandIn={isHandIn}\r\n          openNote={this._handleOpenNote}\r\n        />\r\n        <SingleQA\r\n          changeAnswer={changeAnswer}\r\n          myAnswer={myAnswer}\r\n          id={id}\r\n          question={question}\r\n          options={options}\r\n          isHandIn={isHandIn}\r\n          isNoteOpen={this.state.isNoteOpen}\r\n          isCheckCorrectAns={isCheckCorrectAns}\r\n          openNote={this._handleOpenNote}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nexport class SingleQA extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      yourAnswer: '',\r\n      noteContext: '',\r\n    };\r\n  }\r\n  componentWillMount = () => {\r\n    const { id } = this.props\r\n    this.setState({\r\n      noteContext: getDataFromLocalStorage(id).noteContext\r\n    })\r\n  }\r\n  \r\n  componentDidMount = () => {\r\n    this.questionNote.focus()\r\n  }\r\n  \r\n  _handleEditNote = (e) => {\r\n    const { value } = e.target\r\n    const { id } = this.props\r\n    const thisData = getDataFromLocalStorage(id)\r\n    // get data from local storage\r\n    this.setState({\r\n      noteContext: value,\r\n    })\r\n    setDataToLocalStorage(id, 'noteContext', value)\r\n  }\r\n  _handleOptionTitle = (e) => {\r\n    const optionTitle = e.target.getAttribute('answer')\r\n    this.setState({\r\n      yourAnswer: optionTitle,\r\n    })\r\n    this.props.changeAnswer(e)\r\n  }\r\n  render() {\r\n    const { \r\n      myAnswer=[], \r\n      id=1, \r\n      question='', \r\n      options=[], \r\n      isHandIn=false,\r\n      isNoteOpen=false,\r\n      isCheckCorrectAns=false,\r\n      openNote=() => {}\r\n    } = this.props\r\n\r\n    const { noteContext } = this.state\r\n    const thisAnswer = myAnswer.filter(a => a.id === id)[0]\r\n    const withABCDoptions = genOptionsWithABCD(options)\r\n    const correctAnswerWithABCD = () => {\r\n      const index = options.indexOf(thisAnswer.correctAnswer)\r\n      return ABCDOptions[index]\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <div className='question-container'>\r\n          <div className='answer-part'>\r\n            <span className={thisAnswer.answer ? 'answer-active' : 'answer-default' }>\r\n              {getOptionABCDFromAns(thisAnswer.answer, options) || 'your answer'}\r\n            </span>\r\n            <span className='corrected-answer'>\r\n              {isCheckCorrectAns ? correctAnswerWithABCD(): ''}\r\n            </span>  \r\n          </div>\r\n          <div className='question-part'>\r\n            <form \r\n              onChange={this._handleOptionTitle} \r\n              id={id} \r\n              onSubmit={e => e.preventDefault()}\r\n            >\r\n              {thisAnswer.checked !== 'notYet' ? (thisAnswer.checked ? \r\n                <span className='checked-text correct-text'>✔</span> : \r\n                <span className='checked-text false-text'>✘</span> ) \r\n                : ''\r\n              }\r\n              <p className='question'>{question}</p>\r\n              \r\n              {withABCDoptions.map(op => \r\n                <label className='options' key={op.id}>\r\n                  <input \r\n                    type='radio' \r\n                    name={id} \r\n                    value={op.options}\r\n                    answer={op.id}\r\n                    disabled={isHandIn} \r\n                  /> \r\n                  <span style={{ color: 'blue' }}>{op.id}</span>\r\n                  {' ' + op.options}\r\n                </label>\r\n              )}\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n        <div className='question-note' style={{ display: isNoteOpen ? 'block' : 'none'}}>\r\n          <textarea onChange={this._handleEditNote} value={noteContext} placeholder='Take your note here.' ref={el => this.questionNote = el}></textarea>\r\n          <button onClick={openNote}>confirm</button>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nexport class StarButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {}\r\n  }\r\n  render() {\r\n    const { id=0, star=false, starFn=() => {} } = this.props\r\n    return (\r\n      <span onClick={starFn} name={id} className={star ? 'starBTN active' : 'starBTN'}>\r\n        <FontAwesomeIcon icon='star' />\r\n      </span>\r\n    )\r\n  }\r\n}\r\nexport class NoteButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEditNote: false,\r\n      note: '',\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { id=0, noteContext='', noteFn=() => {}, isHandIn, openNote } = this.props\r\n    const { isEditNote } = this.state\r\n    return (\r\n      <Fragment>\r\n        <span className='noteBTN'>\r\n          <FontAwesomeIcon onClick={ isHandIn ? openNote : () => {window.alert('交卷後才能記筆記~')}} name={id} icon='edit' />\r\n        </span>\r\n        <div className='noteBTN-container' style={{display: isEditNote ? 'block' : 'none',  width: 400 }}>\r\n          <textarea \r\n            name={id}\r\n            className='note-noteBTN'\r\n            onChange={noteFn}\r\n            value={noteContext}\r\n          />\r\n          <button onClick={openNote}>confirm</button>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst StarWithHint = HOCwithHint(StarButton, '收藏題目', '已收藏')\r\nconst NoteWithHint = HOCwithHint(NoteButton, '紀錄筆記')\r\n\r\nexport class DataButtons extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      id: 0,\r\n      star: false,\r\n      noteContext: '',\r\n    }\r\n  }\r\n  setDataFromLS = () => {\r\n    const { id } = this.props\r\n    const thisData = getDataFromLocalStorage(id)\r\n    // get data from local storage\r\n    this.setState({\r\n      id: thisData.id,\r\n      star: thisData.star,\r\n      noteContext: thisData.noteContext,\r\n    })\r\n    // console.log(thisData)\r\n  }\r\n  componentWillMount = () => {\r\n    this.setDataFromLS()\r\n  }\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if(prevProps.id !== this.state.id) {\r\n      this.setDataFromLS()\r\n    }\r\n  }\r\n  _handleStar = () => {\r\n    const { id, star, } = this.state\r\n    this.setState({\r\n      star: !this.state.star\r\n    })\r\n    setDataToLocalStorage(id, 'star', !star)\r\n  }\r\n  render() {\r\n    const { id, star, noteContext } = this.state\r\n    const { isHandIn, openNote } = this.props\r\n    return (\r\n      <div className='star-note-buttons'>\r\n        <StarWithHint\r\n          id={id}\r\n          star={star}\r\n          isActive={star}\r\n          starFn={this._handleStar}\r\n        />\r\n        <NoteWithHint\r\n          id={id}\r\n          noteContext={noteContext}\r\n          noteFn={this._handleEditNote}\r\n          isHandIn={isHandIn}\r\n          openNote={openNote}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\n// export const TxtWithBTN = WithButtonHOC(TxtDiv, 'Hello', clickAlert)\r\n","import React from 'react'\r\nimport { SingleQA_WithButton } from './singleQA'\r\n\r\nexport const DownloadJSONLink = ({obj=[], clickFn=() => {}}) => {\r\n  const jsonStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(obj))\r\n  return (<a href={jsonStr} onClick={clickFn}>Update data</a>)\r\n}\r\nexport const ScorePanel = ({myAnswer=[], allQA=[]}) => {\r\n  return (\r\n    <div>\r\n      <h3>Your Score:</h3>\r\n      { ~~(myAnswer.filter(a => a.checked === true).length / allQA.length * 100) }\r\n    </div>\r\n  )\r\n}\r\nexport const getAnswerLength = (myAnswer) => (\r\n  myAnswer.filter(my => my.answer !== '').length\r\n)\r\nexport class WholeTestPaper extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    }\r\n  }\r\n  render() {\r\n    const { testQA=[], myAnswer, isHandIn, changeAnswer, checkAnswer, isCheckCorrectAns, checkCorrectAnswer } = this.props\r\n    // const questionTitle = genArr(myAnswer.length, 1)\r\n    return (\r\n      <div id='test-paper' className='test-paper'>\r\n        <h4>完成題數:  \r\n          <span>\r\n            {getAnswerLength(myAnswer)} /\r\n            {testQA.length}\r\n          </span>\r\n          <span>{testQA.length > 0 && testQA.length === getAnswerLength(myAnswer) ? '所有題目都完成了！' : `還有${testQA.length - getAnswerLength(myAnswer)}題未完成`}</span>\r\n        </h4>\r\n        <h4 id='score'>SCORE: \r\n          <span>\r\n          { isHandIn ? \r\n            <ScorePanel correctAns={myAnswer} allQA={testQA} /> \r\n            : '' }\r\n          </span>\r\n        </h4>\r\n        <hr />\r\n        {testQA.length > 0 ? \r\n          testQA.map(qa =>\r\n            <React.Fragment key={qa.id}>\r\n              <SingleQA_WithButton\r\n                key={qa.id}\r\n                id={qa.id}\r\n                question={qa.question}\r\n                options={qa.options}\r\n                myAnswer={myAnswer}\r\n                changeAnswer={changeAnswer}\r\n                isHandIn={isHandIn}\r\n                isCheckCorrectAns={isCheckCorrectAns}\r\n              />\r\n            </React.Fragment>\r\n          ) : '尚無題目' }\r\n          <button onClick={checkAnswer}>Check Answer!</button>\r\n          <button className='secondBTN' style={{ display: isHandIn ? 'inline-block' : 'none' }} onClick={checkCorrectAnswer}>Check Correct Answer!</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport class SingleTestPaper extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render() {\r\n    const { testQA=[], myAnswer, isHandIn, changeAnswer, checkAnswer, isCheckCorrectAns, singleAnswerModeState } = this.props\r\n    const thisQA = testQA[singleAnswerModeState.index]\r\n    return (\r\n      <div id='single-test-paper' className='test-paper test-paper'>\r\n        {testQA.length > 0 ? \r\n        <div>\r\n            <h4 >目前題數 / 總題數: <br />\r\n              <span>\r\n                {singleAnswerModeState.index + 1} /\r\n                {singleAnswerModeState.idArr.length}\r\n              </span>\r\n            </h4>\r\n            <SingleQA_WithButton\r\n              key={thisQA.id}\r\n              id={thisQA.id}\r\n              question={thisQA.question}\r\n              options={thisQA.options}\r\n              myAnswer={myAnswer}\r\n              changeAnswer={changeAnswer}\r\n              isHandIn={isHandIn}\r\n              isCheckCorrectAns={isCheckCorrectAns}\r\n            />\r\n            <div></div>\r\n            {isHandIn ? <ScorePanel myAnswer={myAnswer} allQA={singleAnswerModeState.idArr} /> : ''}\r\n            <button onClick={checkAnswer}>Check Answer!</button>\r\n          </div>\r\n         : '尚無題目' }\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react'\r\n\r\n// const mockValue = ['A', 'B', 'C']\r\n\r\n\r\nexport class SelectDatabase extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      optionDefault: 'Choose',\r\n    }\r\n  }\r\n  setToDefault = () => {\r\n    this.setState({\r\n      optionDefault: 'Choose'\r\n    })\r\n  }\r\n  render() {\r\n    const { allTestFilterConditions } = this.props\r\n    return (\r\n      <select value={this.state.optionDefault} onInput={this.props.changeSelect} onChange={this.setToDefault}>\r\n        <option style={{ display: 'none' }} value='Choose'>{'Choose'}</option>\r\n        {allTestFilterConditions.map(all => (\r\n          <option key={all} value={all}>{all}</option>\r\n        ))}\r\n      </select>\r\n    );\r\n  }\r\n}\r\n\r\nexport class SelectMenuBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedArr: [],\r\n    };\r\n  }\r\n  _handleChangeSelect = (e) => {\r\n    const { selectedArr } = this.state\r\n    const { value } = e.target\r\n    if(selectedArr.indexOf(value) === -1) {\r\n      this.setState(state => ({\r\n        selectedArr: [...state.selectedArr, value]\r\n      }))\r\n    }\r\n  }\r\n  _handleDeleteSelect = (e) => {\r\n    const name = e.target.getAttribute('name')\r\n    console.log(name)\r\n    const deletedArr = this.state.selectedArr.filter(s => s !== name)\r\n    this.setState({\r\n      selectedArr: deletedArr,\r\n    })\r\n  }\r\n  render() {\r\n    const { allTestFilterConditions, nowFIlterCondition, changeSelectDatabase, deleteSelectDatabase  } = this.props\r\n    return (\r\n      <div>\r\n        <SelectDatabase \r\n          allTestFilterConditions={allTestFilterConditions} \r\n          changeSelect={changeSelectDatabase} \r\n        />\r\n        {nowFIlterCondition.map(now => (\r\n          <div \r\n            className={'seleced-tag'} \r\n            key={now}\r\n          >\r\n            {now}\r\n            <span name={now} onClick={deleteSelectDatabase}> (X) </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n    \r\n  }\r\n}","export const coinImg = 'https://cdn3.iconfinder.com/data/icons/supermario/PNG/Retro-Coin.png'\r\nexport const bigCoin = 'images/coin-sprite-animation.png'\r\nexport const coinUpdate = ['https://static.wixstatic.com/media/7fce08_d7547c63bbb945e69d6bc5c167b39193.gif', 'https://www.pixelmarket.net/media/catalog/product/cache/1/image/650x650/a94eaa0e6015e0566d23f2c54dba56d0/9/a/9ab2aa59d388489c2860019b7338e4b81.PNG']\r\nexport const AVATARimg = 'https://d1nhio0ox7pgb.cloudfront.net/_img/o_collection_png/green_dark_grey/256x256/plain/user.png'\r\nexport const backgroundImage = 'https://visme.co/blog/wp-content/uploads/2017/07/50-Beautiful-and-Minimalist-Presentation-Backgrounds-03.jpg'\r\nexport const testBack = 'https://img.freepik.com/free-vector/abstract-splashed-watercolor-textured-background_53876-8717.jpg?size=626&ext=jpg'\r\n\r\n\r\n\r\nexport const testUIbuttonImage = 'https://cdn4.iconfinder.com/data/icons/game-ui-pack-02/500/play-512.png'\r\nexport const HATs = ['http://www.pngpix.com/wp-content/uploads/2016/07/PNGPIX-COM-Hat-PNG-Transparent-Image-500x377.png', 'http://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Hat-PNG-Transparent-Image--500x248.png', 'http://www.pngpix.com/wp-content/uploads/2016/07/PNGPIX-COM-Cowboy-Hat-PNG-Transparent-Image-250x187.png']\r\n\r\nexport const alertTest = 'https://docs.scandit.com/flow/mobile-api/assets/ui_alert_ios.png'\r\nexport const ICON = {\r\n  OKIcon: 'https://cdn1.iconfinder.com/data/icons/color-bold-style/21/34-512.png',\r\n  cancelIcon: 'https://cdn0.iconfinder.com/data/icons/social-messaging-ui-color-shapes/128/close-circle-red-512.png',\r\n}\r\nexport const ICON2 = 'https://www.san-x.co.jp/charapri/images/kabe/rirakkuma/119_1080_1920.png'\r\nexport const character = 'https://images-na.ssl-images-amazon.com/images/I/51Wpjypba1L._SX425_.jpg'\r\nexport const testMapIcon = [\r\n  'https://freeiconshop.com/wp-content/uploads/edd/bulb-curvy-flat.png',\r\n  'https://freeiconshop.com/wp-content/uploads/edd/html-flat.png',\r\n  'https://freeiconshop.com/wp-content/uploads/edd/car-outline-filled.png',\r\n  'https://freeiconshop.com/wp-content/uploads/edd/earth-outline-filled.png',\r\n  'https://freeiconshop.com/wp-content/uploads/edd/globe-outline-filled.png',\r\n]\r\nexport const testBackArr = [\r\n  'https://image.freepik.com/free-psd/abstract-background-design_1297-84.jpg',\r\n  'https://image.freepik.com/free-vector/bokeh-lights-glitter-background_1048-8548.jpg',\r\n  'https://besthqwallpapers.com/Uploads/14-2-2019/80461/thumb2-blue-mosaic-4k-artwork-mosaic-texture-blue-background.jpg',\r\n  'https://cdn.pixabay.com/photo/2017/03/02/08/58/background-texture-2110724__340.jpg',\r\n  'https://ae01.alicdn.com/kf/HTB1DIU6NVXXXXb_XFXXq6xXFXXXU/-.jpg',\r\n]\r\nexport const freeIcon = {\r\n  shop: 'https://freeiconshop.com/wp-content/uploads/edd/shopping-bag-flat.png',\r\n  info: 'https://freeiconshop.com/wp-content/uploads/edd/info-flat.png',\r\n  coins: 'https://freeiconshop.com/wp-content/uploads/edd/coins-flat.png',\r\n  burger: 'https://freeiconshop.com/wp-content/uploads/edd/burger-flat.png',\r\n  pear: 'https://freeiconshop.com/wp-content/uploads/edd/pear-flat.png',\r\n  hotDog: 'https://freeiconshop.com/wp-content/uploads/edd/hotdog-flat.png',\r\n  close: 'https://freeiconshop.com/wp-content/uploads/edd/cross-flat.png',\r\n  item: 'https://freeiconshop.com/wp-content/uploads/edd/list-flat.png',\r\n  heart: 'https://freeiconshop.com/wp-content/uploads/edd/heart-curvy-flat.png',\r\n  power: 'https://freeiconshop.com/wp-content/uploads/edd/lightning-flat.png',\r\n  book: 'https://freeiconshop.com/wp-content/uploads/edd/book-flat.png',\r\n  car: 'https://freeiconshop.com/wp-content/uploads/edd/car-flat.png',\r\n  iceCream: 'https://freeiconshop.com/wp-content/uploads/edd/ice-cream-cone-flat.png',\r\n  cheese: 'https://freeiconshop.com/wp-content/uploads/edd/cheese-flat.png',\r\n  beer: 'https://freeiconshop.com/wp-content/uploads/edd/beer-flat.png',\r\n}\r\nexport const tigerIcon = 'https://www.shareicon.net/download/128x128//2016/05/16/766068_tiger_512x512.png'\r\n","import { \r\n  freeIcon,\r\n  testBackArr\r\n } from './gameObj'\r\n\r\nexport const initGameConfig = [\r\n  { layer: 'UILayer', id: 2001, objProp: 'text', value: 1 },\r\n\r\n]\r\nexport const styleConfig = {\r\n  fontStyle: {\r\n    sSize: '12px Arial',\r\n    mSize: '18px Arial'\r\n  }\r\n}\r\nexport const canvasSpec = {\r\n  width: 360,\r\n  height: 640,\r\n}\r\nexport const canvasObjAreaSpec = {\r\n  width: 360,\r\n  height: 540,\r\n}\r\n\r\n\r\nexport const TABconfig = [\r\n  { \r\n    tabId: 'tabRect_A', \r\n    blurColor: 'rgba(20, 200, 20, 0.5)', \r\n    focusColor: 'rgba(20, 200, 20, 1)', \r\n    BGId: 'UIDisplay_A',  \r\n  },\r\n  { \r\n    tabId: 'tabRect_B', \r\n    blurColor: 'rgba(200, 20, 20, 0.5)', \r\n    focusColor: 'rgba(200, 20, 20, 1)', \r\n    BGId: 'UIDisplay_B',  \r\n  },\r\n  { \r\n    tabId: 'tabRect_C', \r\n    blurColor: 'rgba(20, 20, 200, 0.5)', \r\n    focusColor: 'rgba(20, 20, 200, 1)', \r\n    BGId: 'UIDisplay_C',  \r\n  },\r\n]\r\nexport const ShopIconConfig = [\r\n  { posId: 0, id: 'ShopIcon_shop', imgSrc: freeIcon.shop },\r\n  { posId: 1, id: 'ShopIcon_info', imgSrc: freeIcon.info },\r\n  { posId: 2, id: 'ShopIcon_coins', imgSrc: freeIcon.coins },\r\n  { posId: 3, id: 'ShopIcon_burger', imgSrc: freeIcon.burger },\r\n  { posId: 4, id: 'ShopIcon_hotDog', imgSrc: freeIcon.hotDog },\r\n  { posId: 5, id: 'ShopIcon_car', imgSrc: freeIcon.car },\r\n  { posId: 6, id: 'ShopIcon_iceCream', imgSrc: freeIcon.iceCream },\r\n  { posId: 7, id: 'ShopIcon_cheese', imgSrc: freeIcon.cheese },\r\n]\r\nexport const ShopUIConfig = {\r\n  backGround: { \r\n    width: 300, \r\n    height: 500, \r\n    imgSrc: testBackArr[3]\r\n  },\r\n  iconDist: {\r\n    y: 80,\r\n  }\r\n}","import { canvasObjAreaSpec } from './gameConfig'\r\nimport { drawStaticImg, myGroupObjs } from './gameLib'\r\n\r\n\r\nexport const getMultiAction = (times, fn) => {\r\n  for (let i = 0; i < times; i++) {\r\n    fn()\r\n  }\r\n}\r\nconst getTRBL = (obj) => ({\r\n  t: obj.y,\r\n  l: obj.x,\r\n  b: obj.y + obj.h,\r\n  r: obj.x + obj.w\r\n})\r\nexport const checkObjInsideCollideWithWall = (obj, wall) => {\r\n  // if collided return true\r\n  const objTRBL = getTRBL(obj)\r\n  const wallTRBL = getTRBL(wall)\r\n  const leftCondition = objTRBL.l > wallTRBL.l\r\n  const rightCondition = objTRBL.r < wallTRBL.r\r\n  const topCondition = objTRBL.t > wallTRBL.t\r\n  const bottomCondition = objTRBL.b < wallTRBL.b\r\n  // console.log(objTRBL, wallTRBL)\r\n  if(leftCondition && rightCondition && topCondition && bottomCondition) {\r\n    return false\r\n  } else {\r\n    let collideRes = []\r\n    if(!leftCondition) { collideRes = [...collideRes, 'left'] }\r\n    if(!rightCondition) { collideRes = [...collideRes, 'right'] }\r\n    if(!topCondition) { collideRes = [...collideRes, 'top'] }\r\n    if(!bottomCondition) { collideRes = [...collideRes, 'bottom'] }\r\n    return collideRes\r\n  }\r\n}\r\nexport const getIntersection = (a, b, c, d) => {\r\n  const areaABC = (a.x - c.x) * (b.y - c.y) - (a.y - c.y) * (b.x - c.x)\r\n  const areaABD = (a.x - d.x) * (b.y - d.y) - (a.y - d.y) * (b.x - d.x)\r\n  if(areaABC * areaABD >= 0) {\r\n    return false\r\n  }\r\n  const areaADC = (d.x - a.x) * (c.y - a.y) - (d.y - a.y) * (c.x - a.x)\r\n  const areaCDB = (d.x - c.x) * (b.y - c.y) - (d.y - c.y) * (b.x - c.x)\r\n  if(areaADC * areaCDB >= 0) {\r\n    return false\r\n  }\r\n  const t = areaADC / (areaABD - areaADC)\r\n  const dx = t * (b.x - a.x)\r\n  const dy = t * (b.y - a.y)\r\n  return { x: a.x + dx, y: a.y + dy }\r\n}\r\n\r\n\r\n\r\nexport const checkMoveObjCollideWithObj = (obj1, obj2) => {\r\n  // if collided return true\r\n  let collideRes = []\r\n  const { vx, vy } = obj1\r\n  \r\n  const obj1TRBL = getTRBL(obj1)\r\n  const obj2TRBL = getTRBL(obj2)\r\n  const obj1TopPoint = {\r\n    x: vx === 0 ? \r\n      ( obj1TRBL.r <= obj2TRBL.r ? obj1TRBL.r : obj1TRBL.l) : \r\n      (vx > 0 ? obj1TRBL.r : obj1TRBL.l),\r\n    y: vy === 0 ? \r\n      ( obj1TRBL.b <= obj2TRBL.b ? obj1TRBL.b : obj1TRBL.t) : \r\n      (vy > 0 ? obj1TRBL.b : obj1TRBL.t),\r\n  }\r\n  const nextObj1TopPoint = {\r\n    x: obj1TopPoint.x + vx,\r\n    y: obj1TopPoint.y + vy,\r\n  }\r\n  const obj2Points = [\r\n    { x: obj2TRBL.l, y: obj2TRBL.t, },\r\n    { x: obj2TRBL.r, y: obj2TRBL.t, },\r\n    { x: obj2TRBL.r, y: obj2TRBL.b, },\r\n    { x: obj2TRBL.l, y: obj2TRBL.b, },\r\n  ]\r\n  console.log(obj1TRBL, obj2TRBL)\r\n  if( getIntersection(obj1TopPoint, nextObj1TopPoint, obj2Points[0], obj2Points[1]) ) {\r\n    collideRes = [...collideRes, 'top']\r\n  }\r\n  if( getIntersection(obj1TopPoint, nextObj1TopPoint, obj2Points[1], obj2Points[2]) ) {\r\n    collideRes = [...collideRes, 'right']\r\n  }\r\n  if( getIntersection(obj1TopPoint, nextObj1TopPoint, obj2Points[2], obj2Points[3]) ) {\r\n    collideRes = [...collideRes, 'bottom']\r\n  }\r\n  if( getIntersection(obj1TopPoint, nextObj1TopPoint, obj2Points[3], obj2Points[0]) ) {\r\n    collideRes = [...collideRes, 'left']\r\n  }\r\n  console.log(collideRes)\r\n  if(collideRes.length === 0) {\r\n    return false\r\n  } else {\r\n    if(vy > 0) {\r\n      if(collideRes.indexOf('top')) { return 'top' }\r\n      else { return collideRes.filter(r => r !== 'bottom')[0] }\r\n    } else if(vy < 0) {\r\n      if(collideRes.indexOf('bottom')) { return 'bottom' }\r\n      else { return collideRes.filter(r => r !== 'top')[0] }\r\n    }\r\n  }\r\n  // const leftCondition = obj1TRBL.r < obj2TRBL.l\r\n  // const rightCondition = obj2TRBL.l > obj1TRBL.r \r\n  // const topCondition = obj1TRBL.b < obj2TRBL.t\r\n  // const bottomCondition = obj1TRBL.t > obj2TRBL.b\r\n  // if(leftCondition || rightCondition || topCondition || bottomCondition) {\r\n  //   return false\r\n  // } else {\r\n  //   if(!leftCondition && !topCondition && !bottomCondition && ) { \r\n  //     return 'rightCollide'\r\n  //   }\r\n  //   return true\r\n  // }\r\n}\r\nexport const checkCollideWithPoint = (point={x: 0, y: 0}, collideObj={x: 0, y: 0, w: 0, h: 0}) => {\r\n  // console.log(collideObj)\r\n  if( collideObj.display && !collideObj.groupDisplay.includes(false) ) {\r\n    if(point.x < collideObj.x + collideObj.w && point.x > collideObj.x && \r\n      point.y < collideObj.y + collideObj.h && point.y > collideObj.y) {\r\n        return true\r\n    } return false\r\n  }\r\n}\r\nexport const checkAllCollideWithId = (tapPos={x: 0, y: 0}, allCollideObjs=[], id=10, cloneId=0, allCloneAction=false) => {\r\n  for (let i = 0; i < allCollideObjs.length; i++) {\r\n    const thisCollide = allCollideObjs[i]\r\n    const collideSpec = {\r\n      x: thisCollide.OBJ.x,\r\n      y: thisCollide.OBJ.y,\r\n      w: thisCollide.OBJ.w,\r\n      h: thisCollide.OBJ.h,\r\n    }\r\n    // console.log(id, tapPos, collideSpec)\r\n    if(checkCollideWithPoint(tapPos, collideSpec)) {\r\n      // console.log(thisCollide.id)\r\n\r\n      if(thisCollide.OBJ.groupObjs) {\r\n        return checkAllCollideWithId({x: tapPos.x, y: tapPos.y}, thisCollide.OBJ.groupObjs, id, cloneId, allCloneAction)\r\n      }\r\n      if(cloneId !== 0) {\r\n        if(allCollideObjs[i].id === id && allCloneAction && allCollideObjs[i].cloneId === cloneId) {\r\n          return true\r\n        }\r\n      } else if(allCollideObjs[i].id === id){\r\n        return true\r\n      }\r\n    }\r\n  }\r\n}\r\nexport const getCanvasComponent = (id='', imgSrc='', spec=[0, 0, 0, 0], drawClass=drawStaticImg, ratio=1, status=[], opacity) => ({\r\n  id,\r\n  cloneId: 0,\r\n  OBJ: new drawClass({\r\n    id,\r\n    imgSrc, \r\n    width: spec[0], \r\n    height: spec[1], \r\n    x: spec[2], \r\n    y: spec[3],\r\n    imgRatio: ratio,\r\n    status,\r\n    opacity,\r\n  })\r\n})\r\nexport const getCanvasGroup = ({ id='', spec=[0, 0], drawGroupClass=myGroupObjs, groupObjs=[] }) => ({\r\n  id,\r\n  cloneId: 0,\r\n  OBJ: new drawGroupClass({\r\n    id,\r\n    x: spec[0],\r\n    y: spec[1],\r\n    groupObjs: groupObjs,\r\n  })\r\n})\r\nexport const getCanvasRandPos = (canvasObjAreaSpec, Obj, x=0, y=0) => ({\r\n  x: x === 0 ? ~~( Math.random() * ( canvasObjAreaSpec.width - Obj.OBJ.w ) ) : x,\r\n  y: y === 0 ? ~~( Math.random() * ( canvasObjAreaSpec.width - Obj.OBJ.w ) ) : y,\r\n})\r\nexport const spawnRandomPosObj = (gameInstanceLayer, objFn, ...objFnParas) => {\r\n  const originObj = objFn()\r\n  const randX = ~~( Math.random() * ( canvasObjAreaSpec.width - originObj.OBJ.w ) ) \r\n  const randY = ~~( Math.random() * ( canvasObjAreaSpec.height - originObj.OBJ.h ) )\r\n  const newId = gameInstanceLayer.layerObjs.length + 1\r\n  const newObj = objFn(randX, randY, ...objFnParas)\r\n  return ( {\r\n    newId: newId,\r\n    newObjs: [\r\n      ...gameInstanceLayer.layerObjs,{\r\n        id: newId,\r\n        OBJ: newObj.OBJ\r\n      }\r\n    ]\r\n  } )\r\n}\r\nexport const destroyObj = (originObjs, id='', cloneId=0) => {\r\n  if(typeof(id) === 'undefined' | typeof(cloneId) === 'undefined') {\r\n    throw 'Your object id or clone id is undefined.'\r\n  }\r\n  return (originObjs.filter(o => !(o.id === id && o.cloneId === cloneId) ))\r\n}\r\n\r\nexport const getTap = (e, canvas, layerInstanse, id, cloneId=0, actionFn, allCloneAction=false) => {\r\n  const tapX = e.targetTouches ? e.targetTouches[0].clientX : e.clientX\r\n  const tapY = e.targetTouches ? e.targetTouches[0].clientY : e.clientY\r\n  const posX = tapX - canvas.getBoundingClientRect().left \r\n  const posY = tapY - canvas.getBoundingClientRect().top\r\n  const tapPos = {\r\n    x: posX, y: posY\r\n  }\r\n  if(layerInstanse) {\r\n    const getTapObj = getLayerObjByIdCloneId(layerInstanse.layerObjs, id, cloneId, allCloneAction)\r\n    if(getTapObj && getTapObj.length > 0) {\r\n      // console.log(getTapObj)\r\n      if( getTapObj.map(obj => checkCollideWithPoint(tapPos, obj.OBJ)).indexOf(true) !== -1 ) {\r\n        // console.log(id, cloneId, 'tap')\r\n        return actionFn\r\n      }\r\n    }\r\n  }\r\n  return false\r\n}\r\nexport const getBreakComponent = (textArr=[], textWidthArr=[], containerWidth=100) => {\r\n  let i = 0, j = 0\r\n  const resBreak = []\r\n  const tempWidthArr = []\r\n  while(i < textArr.length) {\r\n    if(typeof(tempWidthArr[j]) === 'undefined' ) {\r\n      tempWidthArr[j] = textWidthArr[i]\r\n      resBreak[j] = textArr[i]\r\n    } else if(tempWidthArr[j] < containerWidth) {\r\n      tempWidthArr[j] += textWidthArr[i]\r\n      resBreak[j] += ' ' + textArr[i] \r\n    } else {\r\n      j++\r\n      tempWidthArr[j] = textWidthArr[i]\r\n      resBreak[j] = textArr[i]\r\n    }\r\n    i++\r\n  }\r\n  return resBreak\r\n}\r\nexport const checkCollideWithWalls = (w, h, x, y, wallW, wallH) => {\r\n  const objSpec = {\r\n    t: y, r: x + w, b: y + h, l: x\r\n  }\r\n  if(objSpec.t < 0 || objSpec.r > wallW || objSpec.b > wallH || objSpec.l < 0) {\r\n    if(objSpec.t < 0) {\r\n      return 'top'\r\n    } else if(objSpec.r > wallW) {\r\n      return 'right'\r\n    } else if(objSpec.b > wallH) {\r\n      return 'bottom'\r\n    } else {\r\n      return 'left'\r\n    }\r\n  }\r\n  return false\r\n}\r\nexport const getLayerObjByIdCloneId = (layerOBJs, id='obj', cloneId=0, allClone=false) => {\r\n  // console.log(layerOBJs)\r\n  let resLayerObjs = []\r\n  \r\n  for (let i = 0; i < layerOBJs.length; i++) {\r\n    const checkResult = allClone ? \r\n      layerOBJs.filter(obj => obj.id === id) : \r\n      layerOBJs.filter(obj => obj.id === id && obj.cloneId === cloneId)\r\n    if(checkResult.length > 0) {\r\n      // console.log(layerOBJs[i])\r\n      resLayerObjs = [...resLayerObjs, ...checkResult]\r\n      break\r\n    } else if(layerOBJs[i].OBJ.groupObjs) {\r\n      const res = getLayerObjByIdCloneId(layerOBJs[i].OBJ.groupObjs, id, cloneId, allClone)\r\n      // console.log(res)\r\n      if(res) {\r\n        resLayerObjs = [...resLayerObjs, ...res]\r\n      }\r\n    }\r\n  }\r\n  return resLayerObjs\r\n}\r\nexport const mergeArrObjs = (...arrObjs) => {\r\n  const LENGTHs = arrObjs.map(arr => arr = arr.length ? arr.length : arr)\r\n  for (let i = 0; i < LENGTHs.length; i++) {\r\n    if(LENGTHs[i] !== LENGTHs[0]) { throw 'your parameter have different length.' }\r\n  }\r\n  let res = []\r\n  console.log(arrObjs)\r\n  for (let i = 0; i < arrObjs.length; i++) {\r\n    for (let j = 0; j < arrObjs[i].length; j++) {\r\n      res[j] = {\r\n        ...res[j],\r\n        ...arrObjs[i][j],\r\n      }\r\n    }\r\n  }\r\n  return res\r\n}","import { setValueOfArrObj } from '../functions'\r\nimport { \r\n  canvasSpec,\r\n  initGameConfig, \r\n  canvasObjAreaSpec,\r\n } from './gameConfig'\r\n import { \r\n  getCanvasRandPos, \r\n  destroyObj, \r\n  getTap,\r\n  checkCollideWithWalls,\r\n  getBreakComponent,\r\n  getLayerObjByIdCloneId\r\n} from './gameFunc'\r\nimport * as gameComponents from './gameComponents'\r\nimport { isArray } from 'util';\r\n// import './gameObj'\r\n\r\n\r\nexport class drawRect {\r\n  constructor({ id, cloneId=0, display=true, x, y, w, h, fillStyle='transparent', strokeStyle='transparent' }) {\r\n    // this.ctx = canvas.getContext('2d')\r\n    this.id = id\r\n    this.cloneId = cloneId\r\n    this.display = display\r\n    this.groupDisplay = []\r\n    this.x = x\r\n    this.y = y\r\n    this.translateXY = {\r\n      x: [], y: [],\r\n    }\r\n    this.w = w\r\n    this.h = h\r\n    this.fillStyle = fillStyle     \r\n    this.strokeStyle = strokeStyle\r\n    this.prevProps = {\r\n      x: this.x, y: this.y,\r\n      groupDisplay: ['nothing'],\r\n    }        \r\n  }\r\n  setAttr(attr, value) {\r\n    this[attr] = value\r\n  }\r\n  drawOnCanvas(ctx) {\r\n    ctx.save()\r\n    ctx.fillStyle = this.fillStyle\r\n    ctx.fillRect(this.x, this.y, this.w, this.h)\r\n    ctx.fill()\r\n    ctx.strokeStyle = this.strokeStyle\r\n    ctx.stroke()\r\n    ctx.restore()\r\n  }\r\n  draw(ctx) {\r\n    if( !this.groupDisplay.includes(false) ) {\r\n      this.display = true\r\n      this.drawOnCanvas(ctx)\r\n    } else {\r\n      this.display = false\r\n    }\r\n  }\r\n  render(ctx) {\r\n    // this.ctx.restore()\r\n    this.draw(ctx)\r\n  }\r\n}\r\nexport class drawUIText {\r\n  constructor({ x=0, y=0, display=true, fillStyle, textConfig, text='Hi', lineHeight=1.2, containerWidth=100, textAlignCenter=true, textBreak=false }) {\r\n    this.display = display\r\n    this.groupDisplay = []\r\n    this.textConfig = textConfig\r\n    this.text = text\r\n    this.textBreak = textBreak\r\n    this.breakText = null\r\n    this.fontSize = 18\r\n    this.fillStyle = fillStyle\r\n    this.x = this.textAlignCenter ? 0 : x \r\n    this.y = y\r\n    this.translateXY = {\r\n      x: [], y: [],\r\n    }\r\n    this.w = 0\r\n    this.h = 0\r\n    this.containerWidth = containerWidth\r\n    this.lineHeight = lineHeight\r\n    this.textAlignCenter = textAlignCenter\r\n    this.prevProps = {\r\n      x: this.x, y: this.y,\r\n      groupDisplay: ['nothing'],\r\n    }\r\n  }\r\n  setAttr(attr, value) {\r\n    this[attr] = value\r\n    this.prevProps = {\r\n      ...this.prevProps,\r\n      [attr]: value\r\n    }\r\n  }\r\n  handleTextBreak(ctx) {\r\n    ctx.font = this.textConfig\r\n    const textSplit = this.text.split(' ')\r\n    const txtSplitWidth = textSplit.map(t => t = ctx.measureText(t).width)\r\n    console.log(txtSplitWidth)\r\n    this.breakText = getBreakComponent(textSplit, txtSplitWidth, this.containerWidth)\r\n    console.log(this.breakText)\r\n  }\r\n  handleTextAlignCenter(ctx) {\r\n    this.x += ( this.containerWidth - ctx.measureText(this.text).width ) / 2\r\n    this.w = ctx.measureText(this.text).width\r\n    this.h = ctx.measureText(this.text).height\r\n  }\r\n  drawOnCanvas(ctx) {\r\n    ctx.save()\r\n    ctx.font = this.textConfig\r\n    ctx.fillStyle = this.fillStyle\r\n\r\n    if(this.textAlignCenter) { \r\n      this.handleTextAlignCenter(ctx)\r\n      this.textAlignCenter = false\r\n    }\r\n    if(this.textBreak) {\r\n      if(this.breakText === null) {\r\n        this.handleTextBreak(ctx)\r\n      }\r\n      for (let i = 0; i < this.breakText.length; i++) {\r\n        ctx.fillText(this.breakText[i], this.x, this.y + (this.fontSize * this.lineHeight) * i)\r\n      }\r\n    }\r\n    else {\r\n      ctx.fillText(this.text, this.x, this.y)\r\n    }\r\n    ctx.restore()\r\n  }\r\n  draw(ctx) {\r\n    if( !this.groupDisplay.includes(false) ) {\r\n      this.display = true\r\n      this.drawOnCanvas(ctx)\r\n    } else {\r\n      this.display = false\r\n    }\r\n  }\r\n  render(ctx) {\r\n    this.draw(ctx)\r\n  }\r\n}\r\nexport class drawStaticImg {\r\n  constructor({ id, cloneId, imgSrc, width, height, x=0, y=0, imgRatio=1, status=[], opacity=1 }) {\r\n    this.id = id\r\n    this.cloneId = cloneId\r\n    this.groupDisplay = []\r\n    this.display = true\r\n    this.imgSrc = imgSrc\r\n    this.image = new Image()\r\n    this.image.src = this.imgSrc\r\n    this.imgRatio = imgRatio\r\n    this.opacity = opacity\r\n    this.width = width * this.imgRatio\r\n    this.height = height * this.imgRatio\r\n    this.x = x\r\n    this.y = y\r\n    this.translateXY = {\r\n      x: [], y: [],\r\n    }\r\n    this.speed = 2\r\n    this.dir = true\r\n    this.w = this.width\r\n    this.h = this.height\r\n    this.obj = {\r\n      x: this.x,\r\n      y: this.y,\r\n      w: this.w,\r\n      h: this.h\r\n    }\r\n    this.bounceStart = false\r\n    this.bounceState = {\r\n      bounceTimes: 4,\r\n      bounceLimit: 6,\r\n      bounceNow: 0,\r\n      bounceDirec: 'big',\r\n    }\r\n    this.status = [\r\n      {\r\n        statusName: 'origin',\r\n        img: this.imgSrc\r\n      },\r\n      ...status\r\n    ]\r\n    this.prevProps = {\r\n      x: 0, y: 0,\r\n      originXY: { x: this.x, y: this.y },\r\n      translateXY: null,\r\n    }\r\n  }\r\n  setAttr(attr=false, value='') {\r\n    this[attr] = value\r\n    // this.checkGroupTranslate()\r\n    this.prevProps = {\r\n      ...this.prevProps,\r\n      [attr]: value\r\n    }\r\n  }\r\n  bounceLoop() {\r\n    const {  bounceLimit, bounceNow, bounceDirec } = this.bounceState\r\n    \r\n    if(bounceNow < bounceLimit * 2) {\r\n      console.log(bounceDirec)\r\n      if(bounceNow >= bounceLimit - 1) {\r\n        this.bounceState.bounceDirec = 'small'\r\n      }\r\n      this.bounce(bounceDirec)\r\n      this.bounceState.bounceNow ++\r\n    } else {\r\n      this.bounceState.bounceDirec = 'big'\r\n      this.bounceState.bounceNow = 0\r\n      this.bounceStart = false\r\n    }\r\n    // for (let i = 0; i < bounceTimes.length; i++) {\r\n    //   for (let j = 0; j < bounceLimit.length * 2; j++) {\r\n        \r\n    //   }\r\n    // }\r\n  }\r\n  bounce(bounceDirec) {\r\n    this.x = bounceDirec === 'big' ? this.x - 1 : this.x + 1\r\n    this.y = bounceDirec === 'big' ? this.y - 1 : this.y + 1\r\n    this.width = bounceDirec === 'big' ? this.width + 2 : this.width - 2\r\n    this.height = bounceDirec === 'big' ? this.height + 2 : this.height - 2\r\n  }\r\n  moveByUser(e) {\r\n    if(e.keyCode - 37 >= 0 && e.keyCode - 37 <=3) {\r\n      const distanceX = [-1, 0, 1, 0][e.keyCode - 37] * this.speed\r\n      const distanceY = [0, -1, 0, 1][e.keyCode - 37] * this.speed\r\n      this.x += distanceX\r\n      this.y += distanceY\r\n    }\r\n  }\r\n  moveByNum(x, y) {\r\n    const collideRes = checkCollideWithWalls(this.w, this.h, this.x, this.y, canvasSpec.width, canvasSpec.height)\r\n    // if(checkCollideWithWalls(this.w, this.h, this.x, this.y, canvasSpec.width, canvasSpec.height)) {\r\n    //   this.dir = false\r\n    //   this.x -= x * this.speed\r\n    //   this.y -= y * this.speed\r\n    // } \r\n    const distX = collideRes === 'right' || collideRes ===  'left' ? -x : x\r\n    const distY = collideRes === 'top' || collideRes ===  'bottom' ? -y : y\r\n    this.x += distX * this.speed\r\n    this.y += distY * this.speed\r\n  }\r\n  addStatus(statusName, imgSrc) {\r\n    this.status = [\r\n      ...this.status,\r\n      {\r\n        statusName: statusName,\r\n        img: imgSrc,\r\n      }\r\n    ]\r\n  }\r\n  changeStatus(statusName) {\r\n    const IMG = this.status.filter(s => s.statusName === statusName)\r\n    if(IMG.length > 0) {\r\n      this.image.src = IMG[0].img\r\n    }\r\n  }\r\n  drawOnCanvas(ctx) {\r\n    if(this.bounceStart) { this.bounceLoop() }\r\n    ctx.save()\r\n    ctx.globalAlpha = this.opacity\r\n    ctx.drawImage(\r\n      this.image, \r\n      this.x, \r\n      this.y, \r\n      this.width, \r\n      this.height\r\n    )\r\n    ctx.restore()\r\n  }\r\n  draw(ctx) {\r\n    if( !this.groupDisplay.includes(false) ) {\r\n      this.display = true\r\n      this.drawOnCanvas(ctx)\r\n    } else {\r\n      this.display = false\r\n    }\r\n  }\r\n  render(ctx) {\r\n    // console.log(this.display)\r\n    this.draw(ctx)\r\n  }\r\n}\r\n\r\nexport class drawSpriteImg extends drawStaticImg {\r\n  constructor({ frameRate=10, imgIndex = 0, imgTick = 0, ...props }) {\r\n    super(props)\r\n    this.actionsFn = [this.updateFrame]\r\n    this.frameRate = frameRate\r\n    this.w = this.width / this.frameRate\r\n    this.h = this.height\r\n    \r\n    this.imgIndex = imgIndex\r\n    this.imgTick = imgTick\r\n  }\r\n  draw(ctx) {\r\n    // this.ctx.clearRect(this.x, this.y, this.width / this.frameRate, this.height)\r\n    ctx.drawImage(\r\n      this.image, \r\n      this.imgIndex * this.width / this.frameRate / this.imgRatio, \r\n      0, \r\n      this.width / this.frameRate / this.imgRatio, \r\n      this.height / this.imgRatio,\r\n      this.x + this.groupXY.x, \r\n      this.y + this.groupXY.y, \r\n      this.width / this.frameRate, \r\n      this.height)\r\n    \r\n  }\r\n  updateFrame() {\r\n    // console.log(this.imgIndex)\r\n    if(this.imgTick < this.frameRate - 1) {\r\n      this.imgTick += 0.25\r\n      if(this.imgTick % 1 === 0) {\r\n        this.imgIndex = this.imgTick\r\n      }\r\n    } else {\r\n      this.imgTick = 0\r\n    }\r\n    \r\n  }\r\n  render(ctx) {\r\n    this.updateFrame()\r\n    if(this.display) { this.draw(ctx) }\r\n  }\r\n}\r\n\r\nexport class actionUpObj extends drawSpriteImg {\r\n  constructor(props) {\r\n    super(props)\r\n    this.actionsFn = [...this.actionsFn, this.upAction]\r\n    this.posYTick = 40\r\n    this.posYIndex = 0\r\n  }\r\n  upAction() {\r\n    if(this.posYIndex < this.posYTick) {\r\n      this.y -= 1\r\n      this.posYIndex += 1\r\n    }\r\n  }\r\n  render(ctx) {\r\n    this.upAction()\r\n    this.updateFrame()\r\n    this.draw(ctx)\r\n  }\r\n}\r\n\r\nexport class myGroupObjs {\r\n  constructor({ id, cloneId=0, groupDisplay=true, x, y, groupObjs=[{ id: 0, OBJ: {} }], groupRatio }) {\r\n    this.id = id\r\n    this.cloneId = cloneId\r\n    this.groupDisplay = [groupDisplay]\r\n    this.display = true\r\n    this.x = x\r\n    this.y = y\r\n    this.translateXY = {\r\n      x: [this.x], y: [this.y]\r\n    }\r\n    this.groupXY = {\r\n      x: 0, y: 0, setToGroupXY: false,\r\n    }\r\n    this.groupRatio = groupRatio\r\n    this.groupObjs = groupObjs\r\n    this.bounceStart = false\r\n    this.prevProps = {\r\n      groupDisplay: [],\r\n      display: null,\r\n      groupObjs: this.groupObjs,\r\n      x: null, \r\n      y: null,\r\n    }\r\n    this.setObjInGroup()\r\n    // this.id = id\r\n  }\r\n  setAttr(attr=false, value=false) {\r\n    // const { translateXY } = this.prevProps\r\n    if(attr) { \r\n      this[attr] = value\r\n      // console.log('this.' + attr + ':' , this[attr])\r\n    } else {\r\n      if(this.prevProps.x !== this.x || this.prevProps.y !== this.y) {\r\n        this.setObjInGroup()\r\n      }\r\n      if(this.prevProps.groupObjs.length < this.groupObjs.length) {\r\n        this.setObjInGroup('single', this.groupObjs.length - 1)\r\n        // console.log('setAttr groupObjs.length')\r\n      }\r\n      if(this.bounceStart) {\r\n        for (let i = 0; i < this.groupObjs.length; i++) {\r\n          if(this.groupObjs[i].OBJ.hasOwnProperty('bounceStart')) {\r\n            this.groupObjs[i].OBJ.bounceStart = true\r\n          }\r\n          \r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n  setObjInGroup(singleOrAll='all', singleIndex=0) {\r\n    let w = 0, h = 0\r\n    const setGroupAttr = (i) => {\r\n      this.groupObjs[i].OBJ.setAttr('x', this.groupObjs[i].OBJ.x + this.x - this.prevProps.x)\r\n      this.groupObjs[i].OBJ.setAttr('y', this.groupObjs[i].OBJ.y + this.y - this.prevProps.y)\r\n    }\r\n\r\n    if(singleOrAll === 'all') {\r\n      for (let i = 0; i < this.groupObjs.length; i++) {\r\n        // console.log(this.groupObjs[i].id, this.groupObjs[i])\r\n        setGroupAttr(i)\r\n      }\r\n    } else if(singleOrAll === 'single') {\r\n      setGroupAttr(singleIndex)\r\n    }\r\n    \r\n    for (let i = 0; i < this.groupObjs.length; i++) {\r\n      if(this.groupObjs[i].OBJ.w > w) { w = this.groupObjs[i].OBJ.w }\r\n      if(this.groupObjs[i].OBJ.h > h) { h = this.groupObjs[i].OBJ.h }\r\n    }\r\n    this.w = w\r\n    this.h = h\r\n    // console.log(this.id, this.x, this.y, this.w, this.h)\r\n    this.prevProps = {\r\n      ...this.prevProps,\r\n      x: this.x,\r\n      y: this.y,\r\n      w: this.w,\r\n      h: this.h,\r\n      groupObjs: this.groupObjs,\r\n      translateXY: {\r\n        x: this.translateXY.x, y: this.translateXY.y,\r\n      }\r\n    }\r\n  }\r\n  draw(ctx) {\r\n    const checkGroupPropsChanged = \r\n      this.prevProps.display !== this.display || \r\n      this.prevProps.groupDisplay.toString() !== this.groupDisplay.toString() ||\r\n      this.prevProps.groupObjs.length !== this.groupObjs.length\r\n    \r\n    if(checkGroupPropsChanged) {\r\n      console.log('changed display')\r\n      for (let i = 0; i < this.groupObjs.length; i++) {\r\n        this.groupObjs[i].OBJ.groupDisplay = \r\n            [ ...this.groupDisplay, this.display ]\r\n      }\r\n      this.prevProps = {\r\n        ...this.prevProps,\r\n        display: this.display,\r\n        groupDisplay: this.groupDisplay,\r\n        groupObjs: this.groupObjs,\r\n      }\r\n    }\r\n    for (let i = 0; i < this.groupObjs.length; i++) {\r\n      this.groupObjs[i].OBJ ? \r\n        this.groupObjs[i].OBJ.render(ctx) : this.groupObjs[i].render(ctx)\r\n    }\r\n    this.setAttr()\r\n  }\r\n  render(ctx) {\r\n    ctx.save()\r\n    this.draw(ctx) \r\n    ctx.restore()\r\n  }\r\n}\r\n\r\nexport class clipObj {\r\n  constructor( canvas, clipW=100, clipH=300 ) {\r\n    this.ctx = canvas.getContext('2d')\r\n    this.clipW = clipW\r\n    this.clipH = clipH\r\n  }\r\n  render() {\r\n    \r\n    const region = new Path2D()\r\n    region.rect = (50, 50, this.clipW, this.clipH)\r\n    this.ctx.clip(region)\r\n  }\r\n}\r\n// export class clipObj = ({ clipW=100, clipH=300 }) => \r\n\r\n\r\nexport class myGame {\r\n  constructor(canvas, myLayers={}) {\r\n    this.canvas = canvas\r\n    this.ctx = canvas.getContext('2d')\r\n    this.UIstate = {\r\n      moneyBagCount: 0,\r\n    }\r\n    this.myLayers = {\r\n      BackLayer: myLayers.BackLayer,\r\n      ObjLayer: myLayers.ObjLayer,\r\n      UILayer: myLayers.UILayer,\r\n    }\r\n    this.myLayers.UILayer = undefined\r\n    this.testNum = 0\r\n    this.dir = true\r\n    this.setIdActions = this.setIdActions.bind(this)\r\n    this.frame = { prev: 0, now: 0, fps: 0 }\r\n  }\r\n  setPropToGame(attr, value) {\r\n    this[attr] = value\r\n    this.prevProps = {\r\n      ...this.prevProps,\r\n      [attr]: value,\r\n    }\r\n  }\r\n  init() {\r\n    \r\n    const originLS = JSON.parse(localStorage.getItem('gameConfig')) || [] \r\n    const orginGameSpawnObj = JSON.parse(localStorage.getItem('gameSpawnObjConfig')) || [] \r\n    if(originLS.length === 0) {\r\n      localStorage.setItem('gameConfig', JSON.stringify(initGameConfig))\r\n    }\r\n    if(!localStorage.getItem('gameSpawnObjConfig')) {\r\n      localStorage.setItem('gameSpawnObjConfig', JSON.stringify([]))\r\n    }\r\n    // for (let i = 0; i < initGameConfig.length; i++) {\r\n    //   const { layer, id, objProp, value } = initGameConfig[i]\r\n    //   const thatConfig = originLS.filter(or => or.id === id)\r\n    //   const setValue = originLS.length > 0 && thatConfig ? thatConfig[0].value : value\r\n    //   this.updateStateNum(layer, id, objProp, setValue, true)\r\n    // }\r\n    for (let i = 0; i < orginGameSpawnObj.length; i++) {\r\n      this.spawnObjToLayer({\r\n        layer: 'ObjLayer',\r\n        objFn: gameComponents[orginGameSpawnObj[i].objFn],\r\n        pos: { useRandom: false, \r\n          x: orginGameSpawnObj[i].pos.x, \r\n          y: orginGameSpawnObj[i].pos.y, },\r\n        isInit: true,\r\n        i: i,\r\n        isUI: false,\r\n      })\r\n      \r\n    }\r\n    setInterval(() => {\r\n      this.frame.fps = (this.frame.now - this.frame.prev) * 2\r\n      this.frame.prev = this.frame.now\r\n      // console.log(this.frame)\r\n    }, 500)\r\n  }\r\n  setInitStates(stateObj={}) {\r\n    this.stateTree = stateObj\r\n  }\r\n  updateGameStates(stateObj={}) {\r\n    this.stateTree = {\r\n      ...this.stateTree,\r\n      stateObj,\r\n    }\r\n  }\r\n  getAttr(layerName='', id='', cloneId=0, attr, allClone=false) {\r\n    const targetArr = getLayerObjByIdCloneId(this.myLayers[layerName].layerObjs, id, cloneId, allClone)\r\n    console.log(targetArr[0].OBJ[attr])\r\n    if(targetArr) {\r\n      return targetArr[0].OBJ[attr]\r\n    } else {\r\n      throw 'cannot get attr from your function'\r\n    }\r\n  }\r\n  setAttr(layerName='', id='', cloneId=0, attr='', value, allClone=false) {\r\n    // console.log(this.myLayers[layerName].layerObjs)\r\n    const targetArr = getLayerObjByIdCloneId(this.myLayers[layerName].layerObjs, id, cloneId, allClone)\r\n    for (let i = 0; i < targetArr.length; i++) {\r\n      if(attr === 'groupDisplay' && !isArray(value)) {\r\n        targetArr[i]['OBJ'].setAttr(attr, [value])\r\n      } else {\r\n        targetArr[i]['OBJ'].setAttr(attr, value)\r\n      }\r\n    }\r\n    console.log('gameSetAttr: ', value, targetArr)\r\n  }\r\n  checkObjExist(layer='', container='', id='', cloneId=0) {\r\n    if(container.length > 0) {\r\n      return this.myLayers[layer].layerObjs.filter(obj => obj.id === container)[0].OBJ.groupObjs.filter(obj => obj.id === id && cloneId === cloneId).length > 0\r\n    } else {\r\n      return getLayerObjByIdCloneId(this.myLayers[layer].layerObjs, id, cloneId, true).length > 0\r\n    }\r\n  }\r\n  updateStateNum(layer, id, property, num, init=false) {\r\n    const originObj = \r\n      this.myLayers[layer].layerObjs.filter(obj => obj.id === id)[0] && \r\n      this.myLayers[layer].layerObjs.filter(obj => obj.id === id)[0].OBJ\r\n    const resultVal = init ? num : originObj[property] * 1 + num\r\n\r\n    if(originObj && originObj[property]) { originObj[property] = resultVal }\r\n    \r\n\r\n    const originLS = JSON.parse(localStorage.getItem('gameConfig'))\r\n    const storeData = setValueOfArrObj(originLS, id, 'value', resultVal)\r\n    localStorage.setItem('gameConfig', JSON.stringify(storeData))\r\n  }\r\n  setLayerObjs(layer, container, newObjs) {\r\n    this.myLayers[layer].layerObjs.filter(obj => obj.id === container)[0].OBJ.groupObjs = newObjs\r\n  }\r\n  spawnObjToLayer({layer, container='', objFn, pos={ useRandom: true, x: 0, y: 0, }, objFnParas={}, selfDestroy=false, destroyTime=600, isInit=false, isUI=true, }) {\r\n    const gameLayer = this.myLayers[layer]\r\n    const newObj = objFn({ x: pos.x, y: pos.y, ...objFnParas })\r\n    const getRandXY = getCanvasRandPos(canvasObjAreaSpec, newObj, pos.x, pos.y)\r\n    const newPosObj = pos.useRandom ? objFn(getRandXY.x, getRandXY.y, ...objFnParas) : newObj\r\n    const originGroupObjs = \r\n      gameLayer.layerObjs.filter(obj => obj.id === container)[0].OBJ.groupObjs\r\n    const amountOfCloneObj = originGroupObjs.filter(lo => lo.id === newPosObj.id).length\r\n    const newCloneId = amountOfCloneObj && amountOfCloneObj < 20 ? amountOfCloneObj + 1 : 1\r\n    // console.log('newCloneId: ', newCloneId)\r\n    // const gameSpawnObjConfigSetting = {\r\n    //   id: newPosObj.id,\r\n    //   cloneId: newCloneId,\r\n    //   pos: { x: getRandXY.x, y: getRandXY.y },\r\n    //   objFn: objFn.name,\r\n    // }\r\n    // const newGameSpawnObjConfig = [...originLS, gameSpawnObjConfigSetting]\r\n    //\r\n    \r\n    const newAddedObj = {\r\n      id: newPosObj.id,\r\n      cloneId: newCloneId,\r\n      OBJ: newPosObj.OBJ,\r\n    }\r\n    if(amountOfCloneObj < 20) {\r\n      this.setAttr(layer, container, 0, 'groupObjs', [\r\n        ...originGroupObjs,\r\n        newAddedObj,\r\n      ])\r\n    } else if(amountOfCloneObj >= 20) { //clear clone objs after more than 20\r\n      this.setAttr(layer, container, 0, 'groupObjs', [\r\n        ...originGroupObjs.filter(go => go.id !== newPosObj.id),\r\n        newAddedObj,\r\n      ])\r\n    }\r\n    // console.log(gameLayer.layerObjs)\r\n    if(selfDestroy) {\r\n      setTimeout(() => {\r\n        console.log('delete', originGroupObjs, newCloneId)\r\n        // this.setLayerObjs(layer, container, [\r\n        //   ...originGroupObjs.filter(go => !(go.id === newPosObj.id && go.cloneId < newCloneId)),\r\n        // ])\r\n        this.setAttr(layer, newPosObj.id, newCloneId, 'display', false)\r\n        // originGroupObjs.filter(go => (go.id === newPosObj.id && go.cloneId === newCloneId)).display = false\r\n        // this.setAttr(layer, container, 0, 'groupObjs', [\r\n        //   ...originGroupObjs.filter(go => !(go.id === newPosObj.id && go.cloneId === newCloneId)),\r\n        // ])\r\n      }, destroyTime)\r\n    } else if(!selfDestroy && !isInit && !isUI) {\r\n      // localStorage.setItem('gameSpawnObjConfig', JSON.stringify(newGameSpawnObjConfig))\r\n    }\r\n  }\r\n  removeObjFromLayer(layer='', objId='', cloneId=0) {\r\n    const gameLayer = this.myLayers[layer]\r\n    this.setLayerObjs(layer, destroyObj(gameLayer, objId, cloneId))\r\n  }\r\n  setMouseCursor(e, IDs=[], ) {\r\n    if(this.canvas.style.cursor !== 'default') {\r\n      this.canvas.style.cursor = 'default'\r\n    }\r\n    const setPointer = () => this.canvas.style.cursor = 'pointer'\r\n    const layerNames = ['BackLayer', 'ObjLayer', 'UILayer'] \r\n    const layers = this.myLayers\r\n    for (let i = 0; i < layerNames.length; i++) {\r\n      for (let j = 0; j < IDs.length; j++) {\r\n        const tapAct = getTap(e, this.canvas, layers[layerNames[i]], IDs[j], 0, setPointer, true)\r\n        if(tapAct !== false) {\r\n          tapAct()\r\n          // break\r\n        }\r\n      } \r\n    }\r\n  }\r\n  setIdActions(layer, id, { fn: actionFn, parameters: [...paras] }) {\r\n    this.myLayers[layer].layerObjs.filter(obj => obj.id === id)[0].OBJ[actionFn](...paras)\r\n    return this\r\n  }\r\n  render() {\r\n    this.frame.now += 1\r\n    // setInterval(() => {\r\n    //   console.log(this.frame)\r\n    // }, 1000)\r\n    // console.log(this.frame)\r\n    this.ctx.clearRect(0, 0, canvasSpec.width, canvasSpec.height)\r\n  \r\n\r\n    const layerNames = ['BackLayer', 'ObjLayer', 'UILayer'] \r\n    for (let i = 0; i < layerNames.length; i++) {\r\n      this.myLayers[layerNames[i]] && \r\n      this.myLayers[layerNames[i]].render(this.ctx)\r\n    }\r\n    this.ctx.font = '16px Arial'\r\n    this.ctx.fillStyle = '#000'\r\n    this.ctx.fillText('fps:' + this.frame.fps, 10, 60)\r\n\r\n    requestAnimationFrame(this.render.bind(this))\r\n  }\r\n}\r\nexport class Container {\r\n  constructor({ containerStates={}, containerGroup=[] }) {\r\n    this.containerStates = containerStates || {}\r\n    this.id = containerGroup.id || ''\r\n    this.cloneId = 0\r\n    this.OBJ = containerGroup.OBJ || {}\r\n    this.subscribedComponents = []\r\n  }\r\n  setState(state, value) {\r\n    this.containerStates = {\r\n      ...this.containerStates,\r\n      [state]: value,\r\n    }\r\n  }\r\n  setAttr(id, cloneId, attr, value) {\r\n    console.log(this.containerStates)\r\n    const target = getLayerObjByIdCloneId(this.OBJ.groupObjs, id, cloneId, false)\r\n    if(target && target.length > 0) {\r\n      if(attr === 'groupDisplay' && typeof(attr) === 'string') {\r\n        target[0].OBJ.setAttr(attr, [value])\r\n      } else {\r\n        target[0].OBJ.setAttr(attr, value)\r\n      }\r\n      // console.log(target[0].OBJ)\r\n    }\r\n  }\r\n  updateComponents() {\r\n    console.log('this.containerStates: ', this.containerStates)\r\n  }\r\n  getContainerAttr(containerStateToFilter, attrId) {\r\n    return containerStateToFilter.filter(con => con.id === attrId)[0]\r\n  }\r\n  updateCount(id='', propName='', countPropName='', countUnit=0) {\r\n    const origin = this.containerStates\r\n    // console.log(origin[propName])\r\n    const filterProp = origin[propName].filter(it => it.id === id)\r\n    if(filterProp.length > 0) {\r\n      const originCount = filterProp[0][countPropName]\r\n      const newCount = originCount + countUnit\r\n      this.setContainerState({\r\n        [propName]: [\r\n          ...origin[propName].filter(it => it.id !== id),\r\n          { id, [countPropName]: newCount }\r\n        ]\r\n      })\r\n    }\r\n  }\r\n  setContainerState = (newState) => {\r\n    this.containerStates = {\r\n      ...this.containerStates,\r\n      ...newState,\r\n    }\r\n    this.updateComponents()\r\n  }\r\n  removeObjInContainer(id='', cloneId=0) {\r\n    console.log(this.OBJ.groupObjs)\r\n    this.OBJ.groupObjs = [\r\n      ...this.OBJ.groupObjs.filter(gro => !(gro.id === id && gro.cloneId === cloneId)),\r\n    ]\r\n  }\r\n  addObjToContainer(obj) {\r\n    this.OBJ.groupObjs = [\r\n      ...this.OBJ.groupObjs,\r\n      obj,\r\n    ]\r\n  }\r\n}","import { \r\n  drawStaticImg,\r\n} from '../gameLib'\r\n\r\nexport const Icon = ({ imgSrc='', id='Icon', x=0, y=0, opacity=1 }) => ({\r\n  id,\r\n  cloneId: 0,\r\n  OBJ: new drawStaticImg({\r\n    imgSrc: imgSrc,\r\n    x, y,\r\n    width: 40,\r\n    height: 40,\r\n    opacity,\r\n  })\r\n})\r\n\r\n","import { \r\n  drawUIText,\r\n} from '../gameLib'\r\nimport { Icon } from '../components/Icon'\r\n// import { ShopUIConfig } from '../gameConfig'\r\nimport { getCanvasGroup } from '../gameFunc'\r\n\r\n\r\nexport class drawNumberCountTest extends drawUIText {\r\n  constructor({ count , ...props}) {\r\n    super(props)\r\n    this.count = count\r\n    this.text = 'X ' + this.count\r\n    this.prev = {\r\n      count: this.count,\r\n    }\r\n  }\r\n  updateWithProps() {\r\n    if(this.prev.count !== this.count) {\r\n      this.text = 'X ' + this.count\r\n    }\r\n    this.prev.count = this.count\r\n  }\r\n  render(ctx) {\r\n    // this.ctx.restore()\r\n    if(!this.groupDisplay.includes(false)) {\r\n      this.display = true\r\n      this.draw(ctx)\r\n    } else {\r\n      this.display = false\r\n    }\r\n    this.updateWithProps()\r\n  }\r\n}\r\n// export class PopUpText extends drawUIText {\r\n//   super(props) {\r\n\r\n//   }\r\n// }\r\n\r\nexport const ShopCount = ({ id, count=0, }) => ({\r\n  id: 'shopCount_' + id,\r\n  cloneId: 0,\r\n  OBJ: new drawNumberCountTest({\r\n    x: 0, y: 60,\r\n    textConfig: '14px Arial',\r\n    count,\r\n    containerWidth: 40,\r\n  })\r\n})\r\n\r\nexport const ShopIcon = ({ id='ShopIcon', x=0, y=0, iconImgSrc='', iconCount, }) => getCanvasGroup({\r\n  id,\r\n  spec: [x, y],\r\n  groupObjs: [\r\n    Icon({ imgSrc: iconImgSrc }),\r\n    ShopCount({ id, count: iconCount })\r\n  ]\r\n})","import { \r\n  drawUIText,\r\n} from '../gameLib'\r\n\r\nclass effectNumberPopUp extends drawUIText {\r\n  constructor(props) {\r\n    super(props)\r\n    this.opacity = 1\r\n    this.opacityRate = 0.04\r\n    this.pop = {\r\n      limit: 30,\r\n      now: 0,\r\n      originY: this.y,\r\n    }\r\n  }\r\n  popUp() {\r\n    if(this.pop.now < this.pop.limit) {\r\n      this.pop.now ++\r\n      if(this.opacity - this.opacityRate > 0) {\r\n        this.opacity = this.opacity - this.opacityRate\r\n      } else {\r\n        this.opacity = 0\r\n      }\r\n      this.y -= 0.35\r\n    }\r\n  }\r\n  render(ctx) {\r\n    ctx.save()\r\n    ctx.globalAlpha = this.opacity\r\n    this.popUp()\r\n    this.draw(ctx)\r\n    ctx.restore()\r\n  }\r\n}\r\n\r\nexport default ({ x=100, y=100, id='', count=1, operation='+', }) => ({\r\n  id: 'effectNumberPopUp_' + id, cloneId: 0,\r\n  OBJ: new effectNumberPopUp({\r\n    x, y,\r\n    textConfig: '18px Arial',\r\n    text: operation + ' ' + count,\r\n    containerWidth: 40,\r\n  })\r\n})","import { getCanvasComponent } from '../gameFunc'\r\nimport { testBackArr } from '../gameObj'\r\n\r\nexport default getCanvasComponent('itemsBG', testBackArr[4], [300, 400, 0, 0],)","import { canvasSpec } from '../gameConfig'\r\nimport { freeIcon } from '../gameObj'\r\nimport { Icon } from '../components/Icon'\r\n\r\nexport const ShopOpenIcon = Icon({\r\n  imgSrc: freeIcon.shop,\r\n  id: 'ShopOpenIcon',\r\n  x: canvasSpec.width - 60,\r\n  y: canvasSpec.height - 80,\r\n})\r\nexport const ItemOpenIcon = Icon({\r\n  imgSrc: freeIcon.item,\r\n  id: 'ItemOpenIcon',\r\n  x: 20,\r\n  y: canvasSpec.height - 80,\r\n})\r\n\r\nexport const HealthIcon = Icon({\r\n  imgSrc: freeIcon.heart,\r\n  id: 'HealthIcon',\r\n  x: 0, y: 0,\r\n})\r\nexport const PowerIcon = Icon({\r\n  imgSrc: freeIcon.power,\r\n  id: 'PowerIcon',\r\n  x: 0, y: 0,\r\n})\r\nexport const SmartIcon = Icon({\r\n  imgSrc: freeIcon.book,\r\n  id: 'SmartIcon',\r\n  x: 0, y: 0,\r\n})","import { HealthIcon, PowerIcon, SmartIcon } from './mainUIGameIcons'\r\nimport { getCanvasGroup } from '../gameFunc'\r\nimport { drawRect, drawUIText } from '../gameLib'\r\n\r\nexport class Bar extends drawRect {\r\n  constructor(props) {\r\n    super(props)\r\n    // this.maxLength = 80\r\n    this.length = 0\r\n    this.prev = {\r\n      length: 0,\r\n    }\r\n  }\r\n  updateLength() {\r\n    if(this.prev.length !== this.length) {\r\n      this.w = this.length\r\n      this.prev = {\r\n        ...this.prev,\r\n        length: this.length\r\n      }\r\n    }\r\n  }\r\n  render(ctx) {\r\n    this.updateLength()\r\n    if(this.display) { this.draw(ctx) }\r\n  }\r\n}\r\n\r\nexport class BarStatusCountText extends drawUIText {\r\n  constructor(props) {\r\n    super(props)\r\n    this.count = 0\r\n    this.text = this.count + ' / 100'\r\n    this.textConfig = '14px Arial'\r\n    this.prev = {\r\n      ...this.prev,\r\n      count: this.count,\r\n    }\r\n  }\r\n  updateCountText() {\r\n    if(this.prev.count !== this.count) {\r\n      this.text = this.count + ' / 100'\r\n      this.prev = {\r\n        ...this.prev,\r\n        count: this.count,\r\n      }\r\n    }\r\n  }\r\n  render(ctx) {\r\n    this.updateCountText()\r\n    if(this.display) { this.draw(ctx) }\r\n  }\r\n}\r\n\r\n\r\nconst barRect = (id, barColor) => ({\r\n  id: id + '_barRect',\r\n  cloneId: 0,\r\n  OBJ: new Bar({\r\n    id: id + '_barRect',\r\n    x: 10, y: 10,\r\n    w: 100, h: 20,\r\n    fillStyle: barColor,\r\n  })\r\n})\r\n\r\n\r\n\r\nconst statusCount = (id) => ({\r\n  id: id + '_statusCount',\r\n  cloneId: 0,\r\n  OBJ: new BarStatusCountText({\r\n    x: 40, y: 20,\r\n\r\n  })\r\n})\r\n\r\n\r\n\r\nexport const StatusBar = ({ id, icon, barColor }) => (x, y) => getCanvasGroup({\r\n  id, \r\n  spec: [x, y],\r\n  groupObjs: [\r\n    barRect(id, barColor),\r\n    icon,\r\n    statusCount(id),\r\n  ]\r\n})\r\n\r\nexport const HealthBar = StatusBar({\r\n  id: 'healthBar',\r\n  icon: HealthIcon,\r\n  barColor: '#eaa'\r\n})(0, 0)\r\nexport const PowerBar = StatusBar({\r\n  id: 'powerBar',\r\n  icon: PowerIcon,\r\n  barColor: '#cc0'\r\n})(0, 60)\r\nexport const SmartBar = StatusBar({\r\n  id: 'smartBar',\r\n  icon: SmartIcon,\r\n  barColor: '#3af'\r\n})(0, 120)","import { getCanvasGroup } from '../gameFunc'\r\nimport { Container } from '../gameLib'\r\nimport { HealthBar, PowerBar, SmartBar } from './statusBar'\r\n\r\nconst containerStates = {\r\n  barState: [\r\n    { id: 'healthBar', length: 100, },\r\n    { id: 'powerBar', length: 100, },\r\n    { id: 'smartBar', length: 100, },\r\n  ]\r\n}\r\nexport const barRect = ['healthBar_barRect', 'powerBar_barRect', 'smartBar_barRect']\r\n\r\n\r\nconst mainContainerGroup = (x, y) => getCanvasGroup({\r\n  id: 'MainContainer',\r\n  spec: [x, y],\r\n  groupObjs: [\r\n    HealthBar, \r\n    PowerBar, \r\n    SmartBar\r\n  ]\r\n})\r\n\r\nclass MainContainer extends Container {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  updateComponents() {\r\n    // const { health, power, smartPower } = this.containerState\r\n    const { barState } = this.containerStates\r\n    barState.map(bar => this.setAttr(bar.id + '_barRect', 0, 'length', bar.length))\r\n    barState.map(bar => this.setAttr(bar.id + '_statusCount', 0, 'count', bar.length))\r\n  }\r\n}\r\n\r\nexport default new MainContainer({\r\n  containerStates,\r\n  containerGroup: mainContainerGroup(20, 20),\r\n})\r\n","import { MyItemsContainer } from './itemsContainer'\r\nimport mainUIContainer from '../mainGameUI/mainUIContainer'\r\nimport { ShopIconConfig } from '../gameConfig'\r\nimport { getLayerObjByIdCloneId } from '../gameFunc'\r\n\r\nconst SHOPICON = ShopIconConfig.slice(0, 4).map(con => con = con.id)\r\n\r\nexport const ItemsActions = (gameInstanse) => {\r\n  const { UILayer } = gameInstanse.myLayers\r\n  //  = gameInstanse.getAttr('UILayer', 'ItemsContainer')\r\n  return ([\r\n    {\r\n      layer: UILayer, \r\n      id: 'ItemOpenIcon', cloneId: 0, \r\n      fn: () => {\r\n        const  ItemsContainerGroupDisplay = gameInstanse.getAttr('UILayer', 'ItemsContainer', 0,'display')\r\n        gameInstanse.setAttr('UILayer', 'ItemsContainer', 0, 'display', !ItemsContainerGroupDisplay)\r\n        console.log(getLayerObjByIdCloneId(MyItemsContainer.OBJ.groupObjs, 'shopCount_ShopIcon_shop', 0))\r\n      },\r\n    },\r\n\r\n    ...SHOPICON.map(icon => consumeItems(gameInstanse, icon)),\r\n\r\n    \r\n  ])\r\n}\r\n\r\nexport const updateHealthBar = () => mainUIContainer.updateCount('healthBar', 'barState', 'length', 10)\r\n\r\n\r\nconst consumeItems = (gameInstanse, id) => ({\r\n  layer: gameInstanse.myLayers.UILayer, \r\n  id: id, cloneId: 1, \r\n  fn: () => {\r\n    const originCount = MyItemsContainer\r\n      .getContainerAttr(\r\n        MyItemsContainer.containerStates.items, 'shopCount_' + id).count\r\n    if(originCount - 1 > 0) {\r\n      MyItemsContainer.updateCount('shopCount_' + id, 'items', 'count', -1)\r\n    } else {\r\n      MyItemsContainer.removeObjInContainer(id, 1)\r\n    }\r\n    updateHealthBar()\r\n  },\r\n})\r\n","import { \r\n  drawUIText,\r\n  drawRect,\r\n  myGroupObjs,\r\n} from '../gameLib'\r\nimport { updateHealthBar } from '../items/itemsActions'\r\n\r\nclass TimeText extends drawUIText {\r\n  constructor(props) {\r\n    super(props)\r\n    this.prevTime = 0\r\n    this.countDownTime = 0\r\n    this.time = 0\r\n    this.text = ''\r\n  }\r\n  convertTime() {\r\n    const sec = this.time % 60 < 10 ? '0' + this.time % 60 : this.time % 60 \r\n    const min = ~~(this.time / 60)\r\n    this.text = min + ' : ' + sec\r\n  }\r\n  render(ctx) {\r\n    this.convertTime()\r\n    this.draw(ctx)\r\n  }\r\n}\r\nclass TimeRect extends drawRect {\r\n  constructor({ timeRectType='BG', countDownTime=100, ...props }) {\r\n    super(props)\r\n    this.prevTime = 0\r\n    this.time = 0\r\n    this.maxWidth = 200\r\n    this.countDownTime = countDownTime\r\n    this.w = this.maxWidth\r\n    this.timeRectType = timeRectType\r\n  }\r\n  setWidthByTimeAndType() {\r\n    if(this.timeRectType === 'Active') {\r\n      this.w = (this.time / this.countDownTime) * this.maxWidth\r\n    }\r\n  }\r\n  render(ctx) {\r\n    ctx.save()\r\n    this.setWidthByTimeAndType()\r\n    this.draw(ctx) \r\n    ctx.restore()\r\n  }\r\n}\r\n//\r\nconst countDownTxt = () => ({\r\n  id: 'countDownTxt', cloneId: 0,\r\n  OBJ: new TimeText({\r\n    x: 0, y: 40,\r\n    containerWidth: 200,\r\n  }),\r\n})\r\nconst timerRectBG = (countDownTime) => ({\r\n  id: 'timerRectBack', cloneId: 0,\r\n  OBJ: new TimeRect({\r\n    x: 0, y: 0,\r\n    h: 10,\r\n    fillStyle: '#ddd',\r\n    timeRectType: 'BG',\r\n    countDownTime,\r\n  })\r\n})\r\nconst timerRectActive = (countDownTime) => ({\r\n  id: 'timerRectBack', cloneId: 0,\r\n  OBJ: new TimeRect({\r\n    x: 0, y: 0,\r\n    h: 10,\r\n    fillStyle: '#333',\r\n    timeRectType: 'Active',\r\n    countDownTime,\r\n  })\r\n})\r\n//\r\nexport default class Timer extends myGroupObjs {\r\n  constructor({ countDownTime=100, popUpObjs=[], updateFns=[],  ...props }) {\r\n    super(props)\r\n    this.time = countDownTime\r\n    this.updateFns = updateFns\r\n    this.timer = setInterval(() => {\r\n      const newTime = this.time - 1\r\n      this.handleChangeByTime(newTime)\r\n      // 2sec to update numbers\r\n      if(this.time % 2 === 0) { \r\n        this.resetPopUpObjs() \r\n        this.updateFns.map(fn => fn())\r\n      }\r\n      this.time = newTime\r\n    }, 1000)\r\n    this.popUpObjs = popUpObjs\r\n    this.groupObjs = [\r\n      ...this.groupObjs,\r\n      ...popUpObjs,\r\n    ]\r\n    this.handleChangeByTime(countDownTime)\r\n    this.groupObjs.map(go => go.OBJ.countDownTime = countDownTime)\r\n  }\r\n  resetPopUpObjs() {\r\n    for (let i = 0; i < this.popUpObjs.length; i++) {\r\n      const OBJ = this.popUpObjs[i].OBJ\r\n      const originY = OBJ.pop.originY\r\n      OBJ.setAttr('opacity', 1)\r\n      OBJ.setAttr('y', originY)\r\n      OBJ.pop.now = 0\r\n    }\r\n  }\r\n  checkTimer() {\r\n    if(this.time <= 0) {\r\n      this.display = false\r\n      clearInterval(this.timer)\r\n    }\r\n  }\r\n  handleChangeByTime(time) {\r\n    this.groupObjs.map(go => go.OBJ.time = time)\r\n  }\r\n  render(ctx) {\r\n    ctx.save()\r\n    this.checkTimer()\r\n    this.draw(ctx) \r\n    ctx.restore()\r\n  }\r\n}\r\nexport const DefaultTimer = ({ x=100, y=200, countDownTime=100, objsInTimer=[], popUpObjs }) => ({\r\n  id: 'DefaultTimer', cloneId: 0,\r\n  OBJ: new Timer({\r\n    x, y,\r\n    countDownTime,\r\n    groupObjs: [\r\n      countDownTxt(),\r\n      timerRectBG(countDownTime),\r\n      timerRectActive(countDownTime),\r\n      ...objsInTimer,\r\n    ],\r\n    popUpObjs,\r\n    updateFns: [\r\n      updateHealthBar,\r\n    ]\r\n  }),\r\n})","import { drawStaticImg } from '../gameLib'\r\nimport { checkObjInsideCollideWithWall } from '../gameFunc'\r\nimport { tigerIcon } from '../gameObj'\r\nimport { canvasSpec } from '../gameConfig'\r\n\r\nconst g = 10 / 60\r\n\r\nexport class MoveObj extends drawStaticImg {\r\n  constructor(props) {\r\n    super(props)\r\n    this.speed = { vx: 3, vy: 0.5 }\r\n    this.acceleration = { ax: 0, ay: g, }\r\n    this.wall = {\r\n      x: 0,\r\n      y: 0,\r\n      w: 300,\r\n      h: 600,\r\n    }\r\n  }\r\n  move() {\r\n    this.speed.vx += this.acceleration.ax\r\n    this.speed.vy += this.acceleration.ay\r\n    this.x += this.speed.vx\r\n    this.y += this.speed.vy\r\n  }\r\n}\r\n\r\nconst wallInit = {\r\n  x: 0,\r\n  y: 0,\r\n  w: 300,\r\n  h: 600,\r\n}\r\n\r\nexport class WanderingObj extends drawStaticImg {\r\n  constructor({ wall=wallInit, ...props}) {\r\n    super(props)\r\n    this.speed = { vx: 3, vy: 0 }\r\n    this.acceleration = { ax: 0, ay: g, }\r\n    this.wall = wall\r\n    this.wall = {\r\n      ...this.wall,\r\n      b: this.wall.y + this.wall.h,\r\n    }\r\n    this.count = 0\r\n    // this.wanderCondition = \r\n  }\r\n  move(get) {\r\n     // ??\r\n    const nextPos = { \r\n      x: this.x + this.speed.vx, \r\n      y: this.y + this.speed.vy  \r\n    }\r\n    if(get) {\r\n      return nextPos\r\n    } else {\r\n      this.acc()\r\n      this.x = nextPos.x\r\n      this.y = nextPos.y\r\n    }\r\n  }\r\n  acc() {\r\n    this.speed.vx += this.acceleration.ax\r\n    this.speed.vy += this.acceleration.ay\r\n  }\r\n  checkCollide() {\r\n    const newObj = {\r\n      x: this.move('get').x, \r\n      y: this.move('get').y,\r\n      w: this.w,\r\n      h: this.h,\r\n    }\r\n    return checkObjInsideCollideWithWall(newObj, this.wall)\r\n  }\r\n  wander() {\r\n    const colliderRes = this.checkCollide()\r\n    if(this.y >= this.wall.b) {\r\n      console.log(this.y, this.wall.b)\r\n      this.y = this.wall.b\r\n    } else {\r\n      // console.log(this.speed.vx, this.speed.vy)\r\n      this.speed.vy >= 0 ? this.count += 1 : this.count = 0\r\n      console.log(this.count)\r\n      //多1~2 frame造成加速, 在碰撞後，使用距離補正？\r\n      if(!colliderRes) {\r\n        this.move()\r\n      } else {\r\n        this.x += this.speed.vx \r\n        this.y += this.speed.vy \r\n        if(colliderRes.includes('right') || colliderRes.includes('left')) {\r\n          this.speed.vx = this.speed.vx * -1\r\n        }\r\n        if(colliderRes.includes('top') || colliderRes.includes('bottom')) {\r\n          this.speed.vy = this.speed.vy * -1\r\n        }\r\n        // this.move()\r\n      }\r\n    }\r\n  }\r\n  render(ctx) {\r\n    this.wander()\r\n    this.draw(ctx)\r\n  }\r\n}\r\n\r\nexport const WanderCat = () => ({\r\n  id: 'WanderCat', cloneId: 0,\r\n  OBJ: new WanderingObj({\r\n    x: 40, y: 40,\r\n    width: 60, height: 60,\r\n    imgSrc: tigerIcon,\r\n    wall: {\r\n      ...wallInit,\r\n      w: canvasSpec.width,\r\n      h: canvasSpec.height,\r\n    }\r\n  })  \r\n})","import { \r\n  Icon, \r\n} from '../components/Icon'\r\nimport { ShopIcon } from './shopIcon'\r\nimport { ShopBG_B } from './shopBG'\r\nimport { freeIcon } from '../gameObj'\r\nimport { \r\n  // canvasSpec,\r\n  ShopIconConfig,\r\n  ShopUIConfig \r\n} from '../gameConfig'\r\nimport { \r\n  getCanvasGroup, \r\n  mergeArrObjs,\r\n} from '../gameFunc'\r\nimport { Container } from '../gameLib'\r\nimport { handleBlockLineBreak } from '../../functions'\r\nimport ShopTabs from './shopTabs'\r\nimport EffectNumberPopup from '../components/effectNumberPopup'\r\nimport { DefaultTimer } from '../components/countDownTimer'\r\nimport { WanderCat } from '../components/chracter'\r\n\r\n\r\nconst { width: backW, height: backH, imgSrc: backImgSrc } = ShopUIConfig.backGround\r\n\r\n\r\nexport const shopItems = (itemsId=1) => {\r\n  const groupYDis = 100\r\n  const itemsStartPos = 4 * (itemsId - 1)\r\n  const shopIcons = ShopIconConfig.slice(itemsStartPos, 4 * itemsId)\r\n  const xy = shopIcons\r\n    .map(config => handleBlockLineBreak(config.posId - itemsStartPos, 3, 80, backW, 40))\r\n  let iconConfig = []\r\n  for (let i = 0; i < xy.length; i++) {\r\n    iconConfig[i] = {\r\n      ...shopIcons[i],\r\n      x: xy[i].x,\r\n      y: xy[i].y,\r\n    }\r\n  }\r\n\r\n  return getCanvasGroup({\r\n    id: 'shopItems' + itemsId,\r\n    spec: [0, groupYDis],\r\n    groupObjs: [\r\n      ...iconConfig.map(iconConfig => ShopIcon({\r\n        id: iconConfig.id,\r\n        x: iconConfig.x,\r\n        y: iconConfig.y,\r\n        iconImgSrc: iconConfig.imgSrc,\r\n        iconCount: 0,\r\n      })),\r\n    ]\r\n  })\r\n}\r\nexport const shopItems1 = shopItems(1)\r\nexport const shopItems2 = shopItems(2)\r\n\r\n\r\nexport const CloseIcon = Icon({\r\n  id: 'closeIcon',\r\n  imgSrc: freeIcon.close,\r\n  x: 280, y: -20,\r\n})\r\nexport const ShopBG = ShopBG_B({\r\n  imgSrc: backImgSrc,\r\n  x: 0, y: 0,\r\n  w: backW, h: backH,\r\n})\r\n\r\nconst IconInTimer = () => Icon({\r\n  id: 'IconInTimer',\r\n  imgSrc: freeIcon.power,\r\n  x: 0, y: 30,\r\n})\r\nexport const ObjTimer = ({ x, y }) => DefaultTimer({\r\n  x, y,\r\n  countDownTime: 10,\r\n  objsInTimer: [\r\n    IconInTimer(),\r\n  ],\r\n  popUpObjs: [\r\n    EffectNumberPopup({ x, y, id: 'timerPop', count: 10, }),\r\n  ]\r\n})\r\n\r\nexport const shopContainerGroup = (x, y) => {\r\n  return getCanvasGroup({\r\n    id: 'ShopContainer', \r\n    spec: [x, y], \r\n    groupObjs: [\r\n      ShopBG,\r\n      shopItems1,\r\n      shopItems2,\r\n      ShopTabs(),\r\n      CloseIcon,\r\n      WanderCat(),\r\n      // ObjTimer,\r\n    ]\r\n  })\r\n}\r\n\r\n\r\nconst subscribeIds = [\r\n  { id: 'shopCount_ShopIcon_shop', attr: 'count', },\r\n  { id: 'shopCount_ShopIcon_info', attr: 'count', },\r\n  { id: 'shopCount_ShopIcon_coins', attr: 'count', },\r\n  { id: 'shopCount_ShopIcon_burger', attr: 'count', },\r\n]\r\nexport class ShopContainer extends Container {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  updateComponents() {\r\n    const { countNum } = this.containerStates\r\n    const countNumObj = countNum.map(num => num = { num })\r\n    const mergeStates = mergeArrObjs(subscribeIds, countNumObj)\r\n    console.log(mergeStates)\r\n    mergeStates.map(st => this.setAttr(st.id, 0, st.attr, st.num))\r\n  }\r\n}\r\n// MyShopContainer.subscribeAttrToUpdate({ \r\n//   id: 'shopCount_ShopIcon_shop', attr: 'count',\r\n//   containerStates: MyShopContainer.containerStates.countNum[0]\r\n// })\r\n\r\nexport const MyShopContainer = new ShopContainer({\r\n  containerStates: { countNum: [40, 30, 40, 99] },\r\n  containerGroup: shopContainerGroup(22, 99),\r\n})\r\n//init container\r\nMyShopContainer.updateComponents()\r\nMyShopContainer.setAttr('tabA', 0, 'opacity', 1)\r\nMyShopContainer.setAttr('shopItems2', 0, 'display', false)\r\nconsole.log(MyShopContainer)","import { getCanvasComponent } from '../gameFunc'\r\nimport { drawStaticImg } from '../gameLib'\r\n\r\nexport const ShopBG_A = ({ imgSrc, x, y, w, h }) => getCanvasComponent('ShopBG_A', imgSrc,[x, y, w, h])\r\nexport const ShopBG_B = ({ imgSrc, x, y, w, h }) => ({\r\n  id: 'ShopBG_B',\r\n  cloneId: 0,\r\n  OBJ: new drawStaticImg({\r\n    x, y,\r\n    width: w, height: h,\r\n    imgSrc\r\n  })\r\n})","import { Icon, } from '../components/Icon'\r\nimport { freeIcon } from '../gameObj'\r\nimport { getCanvasGroup, } from '../gameFunc'\r\n\r\nexport const tabA = () => {\r\n  return Icon({\r\n    id: 'tabA',\r\n    x: 0, y: 0,\r\n    imgSrc: freeIcon.pear,\r\n    opacity: 0.4,\r\n  })\r\n}\r\nexport const tabB = () => {\r\n  return Icon({\r\n    id: 'tabB',\r\n    x: 80, y: 0,\r\n    imgSrc: freeIcon.hotDog,\r\n    opacity: 0.4,\r\n  })\r\n}\r\n\r\nexport default () => {\r\n  return getCanvasGroup({\r\n    id: 'shopTabs',\r\n    spec: [20, 20],\r\n    groupObjs: [\r\n      tabA(),\r\n      tabB(),\r\n    ]\r\n  })\r\n}","/* eslint-disable no-unused-vars */\r\n// import './gameUIs'\r\nimport { \r\n  canvasSpec,\r\n  canvasObjAreaSpec,\r\n  styleConfig, \r\n} from './gameConfig'\r\nimport { \r\n  drawRect,\r\n  drawUIText,\r\n  drawStaticImg, \r\n  drawSpriteImg, \r\n  actionUpObj, \r\n  myGroupObjs,\r\n} from './gameLib'\r\nimport { \r\n  getCanvasComponent, \r\n  getCanvasGroup, \r\n  getBreakComponent,\r\n} from './gameFunc'\r\nimport { \r\n  bigCoin,\r\n  coinUpdate,\r\n  testUIbuttonImage,\r\n  backgroundImage,\r\n  alertTest,\r\n  ICON,\r\n  ICON2,\r\n  character,\r\n  testMapIcon,\r\n  testBack\r\n } from './gameObj'\r\n// import { \r\n//   UITabs_A,\r\n//   UITabs_B,\r\n//   UITabs_C,\r\n//   UIDisplay_A,\r\n//   UIDisplay_B,\r\n//   UIDisplay_C,\r\n// } from './gameUIComponents'\r\nimport { ShopContainer } from './shop/shopContainer'\r\nconst { fontStyle } = styleConfig\r\n\r\n\r\nexport class countUIText extends drawUIText {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render(ctx) {\r\n    ctx.font = this.textConfig\r\n    ctx.fillText('X ' + this.text, this.x, this.y)\r\n  }\r\n}\r\nexport class actionUpGroupObjs extends myGroupObjs {\r\n  constructor({ upPosY=40, ...props }) {\r\n    super(props)\r\n    this.posYTick = upPosY\r\n    this.posYIndex = 0\r\n    // this.id = id\r\n  }\r\n  upAction() {\r\n    const yUnit = -1\r\n    if(this.posYIndex < this.posYTick) {\r\n      this.setObjInGroup(0, yUnit)\r\n      this.y = this.y + yUnit\r\n      this.posYIndex += 1\r\n    }\r\n  }\r\n  render(ctx) {\r\n    this.upAction()\r\n    for (let i = 0; i < this.groupObjs.length; i++) {\r\n      this.groupObjs[i].OBJ ? this.groupObjs[i].OBJ.render(ctx) : this.groupObjs[i].render(ctx)\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n//components\r\nexport const testButton = (x=0, y=0) => (\r\n  getCanvasComponent('testButton', testUIbuttonImage, [30, 30, x, y], drawStaticImg, 1, [\r\n    {\r\n      statusName: 'another',\r\n      img: ICON2,\r\n    }\r\n  ])\r\n)\r\n// testButton.OBJ.addState('another', ICON2)\r\n\r\nexport const userCharacter = (x=0, y=0) => (\r\n  getCanvasComponent('userCharacter', character, [120, 120, x, y], drawStaticImg, 0.8, [\r\n    {\r\n      statusName: 'another',\r\n      img: ICON2,\r\n    }\r\n  ])\r\n)\r\nexport const moneyBag = (x=0, y=0) => (\r\n  getCanvasComponent('moneyBag', coinUpdate[1], [100, 100, x, y], drawStaticImg, 0.8)\r\n)\r\nexport const moneys = (x=0, y=0) => (\r\n  getCanvasComponent(7003, coinUpdate[0], [30, 30, x, y], drawStaticImg)\r\n)\r\nexport const countNum = (x=0, y=0, num=10) => ({\r\n  id: 2001,\r\n  OBJ: new countUIText({\r\n    x, y,\r\n    textConfig: fontStyle.sSize,\r\n    text: num\r\n  })\r\n})\r\nexport const upCoin = (x=0, y=0) => (\r\n  getCanvasComponent('upCoin', bigCoin, [1000, 100, x, y], actionUpObj)\r\n)\r\nexport const Coin = (x=0, y=0) => (\r\n  getCanvasComponent(1, bigCoin, [1000, 100, x, y], drawSpriteImg, 0.4)\r\n)\r\nexport const backTest = getCanvasComponent(-1000, backgroundImage, [canvasObjAreaSpec.width, canvasObjAreaSpec.height, 0, 0])\r\n\r\nexport const alert = (x=0, y=0) => (\r\n  getCanvasComponent('alertTest', alertTest, [200, 100, x, y], drawStaticImg)\r\n)\r\nexport const OKIcon = (x=0, y=0) => (\r\n  getCanvasComponent('OKIcon', ICON.OKIcon, [20, 20, x, y], drawStaticImg)\r\n)\r\nexport const cancelIcon = (x=0, y=0) => (\r\n  getCanvasComponent('cancelIcon', ICON.cancelIcon, [20, 20, x, y], drawStaticImg)\r\n)\r\nexport const alertBack = (x, y) => ({\r\n  id: 'alertBack',\r\n  cloneId: 0,\r\n  OBJ: new drawRect({\r\n    x: x,\r\n    y: y,\r\n    w: canvasSpec.width,\r\n    h: canvasSpec.height,\r\n    fillStyle: 'rgba(0, 0, 0, 0.2)'\r\n  })\r\n})\r\nexport const testPicBack = (x, y) => (\r\n  getCanvasComponent('testPicBack', testBack, [300, 300, x, y], drawStaticImg)\r\n)\r\n\r\nexport const ShoppingList = (x=0, y=0) => ({\r\n  id: 3000,\r\n  OBJ: new drawUIText({\r\n    x, y,\r\n    textConfig: fontStyle.mSize,\r\n    text: 'Shop ping List lab', \r\n  })\r\n})\r\nexport const alertPurchase = (x=0, y=0) => ({\r\n  id: 'alertPurchase',\r\n  OBJ: new drawUIText({\r\n    x, y,\r\n    textConfig: fontStyle.mSize, \r\n    text: 'Are you sure upgrading? (cost 10000)'\r\n  })\r\n})\r\n\r\nexport const moneyUIwithText = (x=0, y=0, num=1) => ({\r\n  id: 'moneyUIwithText',\r\n  OBJ: new actionUpGroupObjs({\r\n    upPosY: 30,\r\n    x: x,\r\n    y: y,\r\n    groupObjs: [\r\n      countNum(20, 60, num),\r\n      Coin(0, 0)\r\n    ],\r\n  })\r\n}) \r\n\r\n// export const alertClip = (cv, x, y) => ({\r\n//   id: 'alertClip', cloneId: 0,\r\n//   OBJ: new clipObj(cv, x, y),\r\n// })\r\nexport const alertUI = (x, y) => getCanvasGroup({\r\n  id: 'alertUI', \r\n  spec: [x, y], \r\n  drawGroupClass: myGroupObjs, \r\n  groupObjs: [ \r\n    // alertBack(0, 0),\r\n    \r\n    testPicBack(0, 0),\r\n    // alert(100, 100),\r\n    cancelIcon(200, 160), \r\n    // alertPurchase(130, 140),\r\n    OKIcon(120, 160),\r\n    // UITabs_C,\r\n    // UITabs_B,\r\n    // UITabs_A,\r\n    // UIDisplay_C, \r\n    // UIDisplay_B,\r\n    // UIDisplay_A,   \r\n  ]\r\n})\r\n// getCanvasComponent('moneyBag', canvas, coinUpdate[1], [100, 100, x, y], drawStaticImg, 0.8)\r\nexport const testMAP = [\r\n  { id: 'bulbCurvyFlat', imgSrc: testMapIcon[0], x: 20 },\r\n  { id: 'htmlFlat', imgSrc: testMapIcon[1], x: 80 },\r\n  { id: 'bulbCurvyFlat2', imgSrc: testMapIcon[0], x: 120 },\r\n  { id: 'bulbCurvyFlat3', imgSrc: testMapIcon[0], x: 160 },\r\n]\r\nexport const testGroupMap = (x, y) => getCanvasGroup({\r\n  id: 'testGroupMap', \r\n  spec: [x, y], \r\n  groupObjs: testMAP.map(te => getCanvasComponent(te.id, te.imgSrc, [100, 100, te.x, y], drawStaticImg, 1, [], 0.7) ) \r\n})\r\n\r\n// const a = 0\r\n","import { \r\n  myGame,  \r\n} from './gameLib'\r\nimport { \r\n  ShopOpenIcon,\r\n  ItemOpenIcon,\r\n} from './mainGameUI/mainUIGameIcons'\r\nimport mainUIContainer from './mainGameUI/mainUIContainer'\r\nimport { MyShopContainer } from './shop/shopContainer'\r\nimport { MyItemsContainer } from './items/itemsContainer'\r\nimport { \r\n  backTest \r\n} from './gameComponents'\r\n\r\n//layers\r\n\r\nexport class myLayer {\r\n  constructor(layerObjs=[]) {\r\n    this.layerObjs = layerObjs\r\n  }\r\n  render(ctx) {\r\n    // console.log(this.layerObjs)\r\n    for (let i = 0; i < this.layerObjs.length; i++) {\r\n      this.layerObjs[i].OBJ.render(ctx)\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport const UILayer = new myLayer([\r\n  // testGroupMap(100, 100),\r\n  mainUIContainer,\r\n  MyItemsContainer,\r\n  ItemOpenIcon,\r\n  ShopOpenIcon,\r\n  MyShopContainer,\r\n])\r\nexport const ObjLayer = new myLayer([ \r\n  // userCharacter(120, 120) \r\n])\r\nexport const BackLayer = new myLayer([ \r\n  backTest \r\n])\r\n  \r\n\r\n\r\n//init game\r\nconst allLayer = {\r\n  BackLayer: BackLayer,\r\n  ObjLayer: ObjLayer,\r\n  UILayer: UILayer,\r\n}\r\nexport const idleGame = (ctx) => (\r\n  new myGame(ctx, allLayer)\r\n)","// import { TABconfig } from '../gameConfig'\r\nimport { \r\n  // shopItems1, \r\n  MyShopContainer \r\n} from './shopContainer'\r\nimport { MyItemsContainer } from '../items/itemsContainer'\r\nimport { ObjTimer } from './shopContainer'\r\nimport { ShopIconConfig } from '../gameConfig'\r\nimport EffectNumberPopup from '../components/effectNumberPopup'\r\nimport { ShopIcon } from './shopIcon'\r\n\r\n\r\nlet testCount = 0\r\n// export const tabActions = (gameInstanse) => TABconfig.map(config => (\r\n//   { \r\n//     layer: gameInstanse['myLayers']['UILayer'], \r\n//     id: config.tabId, \r\n//     cloneId: 0, \r\n//     fn: () => {\r\n//       for (let i = 0; i < TABconfig.length; i++) {\r\n//         gameInstanse.setAttr('UILayer', TABconfig[i].tabId, 0, 'fillStyle', TABconfig[i].blurColor)\r\n//         gameInstanse.setAttr('UILayer', TABconfig[i].BGId, 0, 'groupDisplay', false)\r\n//       }\r\n//       gameInstanse.setAttr('UILayer', config.tabId, 0, 'fillStyle', config.focusColor)\r\n//       gameInstanse.setAttr('UILayer', config.BGId, 0, 'groupDisplay', true)\r\n//     }\r\n//   }\r\n// ))\r\n\r\nconst SHOPICON = ShopIconConfig.slice(0, 8).map(con => con = con.id)\r\nconst TABs = [\r\n  { tab: 'tabA', items: 'shopItems1', },\r\n  { tab: 'tabB', items: 'shopItems2', },\r\n  { tab: 'tabC', items: 'shopItems3', },\r\n]\r\nconst popUpNumber = ({x=0, y=0}) => ({ \r\n  layer: 'UILayer',\r\n  container: 'ShopContainer',\r\n  objFn: EffectNumberPopup,\r\n  pos: { x, y },\r\n  objFnParas: { id: 'count1', count: 1,  },\r\n  selfDestroy: true,\r\n  destroyTime: 2000,\r\n})\r\n\r\n\r\nexport const shopUIActions = (gameInstanse) => {\r\n  const { UILayer } = gameInstanse.myLayers\r\n\r\n  return ([\r\n    {\r\n      layer: UILayer, \r\n      id: 'ShopIcon_hotDog', cloneId: 0, \r\n      fn: () => {\r\n        window.alert('ShopIcon_hotDog')\r\n      },\r\n    },\r\n    {\r\n      layer: UILayer, \r\n      id: 'closeIcon', cloneId: 0, \r\n      fn: () => {\r\n        gameInstanse.setAttr('UILayer', 'ShopContainer', 0, 'display', false)\r\n        // gameInstanse.setAttr('UILayer', 'closeIcon', 0, 'bounceStart', true)\r\n        // gameInstanse.setAttr('UILayer', 'ShopContainer', 0, 'groupDisplay', false)\r\n        \r\n      },\r\n    },\r\n    ...SHOPICON.map(icon => buyItems(gameInstanse, icon)),\r\n    ...TABs.map(tab => switchTabs(gameInstanse, MyShopContainer, TABs, tab.tab, tab.items)),\r\n    {\r\n      layer: UILayer, \r\n      id: 'ShopOpenIcon', cloneId: 0, \r\n      fn: () => {\r\n        testCount += 1\r\n        gameInstanse.setAttr('UILayer', 'ShopContainer', 0, 'display', true)\r\n        gameInstanse.setAttr('UILayer', 'ShopOpenIcon', 0, 'bounceStart', true)\r\n        const numberPos = {\r\n          x: gameInstanse.getAttr('UILayer', 'ShopOpenIcon', 0, 'x', false),\r\n          y: gameInstanse.getAttr('UILayer', 'ShopOpenIcon', 0, 'y', false)\r\n        }\r\n        gameInstanse.spawnObjToLayer({ \r\n          layer: 'UILayer',\r\n          container: 'ShopContainer',\r\n          objFn: EffectNumberPopup,\r\n          pos: numberPos,\r\n          objFnParas: { id: 'count1', count: 1,  },\r\n          selfDestroy: false,\r\n          destroyTime: 2000,\r\n        })\r\n        gameInstanse.spawnObjToLayer({ \r\n          layer: 'UILayer',\r\n          container: 'ShopContainer',\r\n          objFn: ObjTimer,\r\n          pos: { x: 100 + testCount * 10, y: 300 + testCount * 10 },\r\n          selfDestroy: false,\r\n        })\r\n      },\r\n    },\r\n    {\r\n      layer: UILayer, \r\n      id: 'ShopIcon_burger', cloneId: 0, \r\n      fn: () => {\r\n        const originX = gameInstanse.getAttr('UILayer', 'ShopContainer', 0, 'x')\r\n        gameInstanse.setAttr('UILayer', 'ShopContainer', 0, 'x', originX + 5)\r\n      },\r\n    },\r\n  ])\r\n}\r\nconst buyItems = (gameInstanse, id) => ({\r\n  layer: gameInstanse.myLayers.UILayer, \r\n  id: id, cloneId: 0, \r\n  fn: () => {\r\n    const ICONconfig = ShopIconConfig.filter(config => config.id === id)\r\n    \r\n    const isExist = gameInstanse.checkObjExist('UILayer', 'ItemsContainer', id)\r\n    const numberPos = {\r\n      x: gameInstanse.getAttr('UILayer', id, 0, 'x', false),\r\n      y: gameInstanse.getAttr('UILayer', id, 0, 'y', false)\r\n    }\r\n    const containerObjsLength = MyItemsContainer.OBJ.groupObjs.length\r\n    gameInstanse.spawnObjToLayer(popUpNumber(numberPos))\r\n\r\n    if(!isExist) {\r\n      ICONconfig.map(con => gameInstanse.spawnObjToLayer({ \r\n        layer: 'UILayer',\r\n        container: 'ItemsContainer',\r\n        objFn: ShopIcon,\r\n        pos: { x: 60 * containerObjsLength, y: 100 },\r\n        objFnParas: { id: con.id, iconImgSrc: con.imgSrc, iconCount: 1 },\r\n        selfDestroy: false,\r\n        destroyTime: 3000,\r\n      }))\r\n\r\n      console.log(MyItemsContainer.containerStates)\r\n      MyItemsContainer.setContainerState({\r\n        items: [\r\n          ...MyItemsContainer.containerStates.items.filter(it => it.id !== 'shopCount_' + id), \r\n          { id: 'shopCount_' + id, count: 1 }\r\n        ]\r\n      })\r\n    } else {\r\n      MyItemsContainer.updateCount('shopCount_' + id, 'items', 'count', +1)\r\n    }\r\n  },\r\n})\r\n\r\nconst switchTabs = (gameInstanse, container, tabs, targetTabId, targetItemId) => ({\r\n  layer: gameInstanse.myLayers.UILayer, \r\n  id: targetTabId, cloneId: 0, \r\n  fn: () => {\r\n    for (let i = 0; i < tabs.length; i++) {\r\n      const { tab, items } = tabs[i]\r\n      container.setAttr(items, 0, 'display', false)\r\n      container.setAttr(tab, 0, 'opacity', 0.4)\r\n    }\r\n    container.setAttr(targetItemId, 0, 'display', true)\r\n    container.setAttr(targetTabId, 0, 'opacity', 1)\r\n  },\r\n})","import { \r\n  shopUIActions,\r\n} from './shop/shopActions'\r\nimport { \r\n  ItemsActions,  } from './items/itemsActions'\r\n\r\nimport mainUIActions from './mainGameUI/mainUI_actions'\r\n\r\nexport const alertUIActions = (gameInstance) => {\r\n  const { UILayer } = gameInstance.myLayers\r\n\r\n  return ([\r\n    { layer: UILayer, id: 'UIDisplayComponent_A', cloneId: 0, fn: () => {\r\n      this.purchaseCoinUprade(10000)\r\n    } },\r\n  \r\n    { layer: UILayer, id: 'cancelIcon', cloneId: 0, fn: () => {\r\n      gameInstance.removeObjFromLayer('UILayer', 'alertUI', 1)\r\n    } },\r\n  \r\n    { layer: UILayer, id: 'alertBack', cloneId: 0, fn: () => {\r\n      return false\r\n    } },\r\n  ])\r\n}\r\n\r\n\r\nexport const tapActionHolder = (gameInstance) => {\r\n  //順序很重要, 越前面的層級越大\r\n  return [\r\n    ...alertUIActions(gameInstance),\r\n    // ...tabActions(gameInstance),\r\n    ...shopUIActions(gameInstance),\r\n    ...ItemsActions(gameInstance),\r\n    ...mainUIActions(gameInstance)\r\n  ]\r\n}","import mainUIContainer from './mainUIContainer'\r\n\r\nexport default (gameInstance) => {\r\n  const { UILayer } = gameInstance.myLayers\r\n\r\n  return ([\r\n    {\r\n      layer: UILayer, \r\n      id: 'healthBar', cloneId: 0, \r\n      fn: () => {\r\n        // gameInstance.setAttr('UILayer', 'ShopContainer', 0, 'groupDisplay', false)\r\n        // window.alert('aa')\r\n        mainUIContainer.updateCount('healthBar', 'barState', 'length', 10)\r\n      },\r\n    }\r\n  ])\r\n}","/* eslint-disable no-unused-vars */\r\nimport React from 'react'\r\nimport { firebaseConfig } from './config'\r\n//game\r\nimport { \r\n  canvasSpec,\r\n  tabActions,\r\n } from './game/gameConfig'\r\nimport { \r\n  moneyBag,\r\n  moneyUIwithText,\r\n  alertUI,\r\n } from './game/gameComponents'\r\nimport { idleGame, } from './game/Layers'\r\nimport { \r\n  getTap,\r\n} from './game/gameFunc'\r\nimport { tapActionHolder } from './game/tapActionsHolder'\r\nimport firebase from 'firebase'\r\n\r\n\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\nexport const database = firebase.database()\r\n// const admin = firebase.admin\r\n\r\n// const gameData = {\r\n//   userName: 'penguin',\r\n//   level: 20,\r\n// }\r\n// const gameData2 = {\r\n//   userName: 'penguin',\r\n//   level: 30,\r\n// }\r\n// const gameDataHandler = (newKey) => ({\r\n//   userName: 'penguin' + newKey,\r\n//   level: newKey * 10,\r\n// })\r\n// database.ref('member/0').set(gameData)\r\n// database.ref('member')\r\n//   .on('value', snapshot => console.log( snapshot.val().length ))\r\n// const writeNew = () => {\r\n//   let count = 0\r\n//   database.ref('member').on('value', snapshot => { \r\n//     count ++\r\n//     if(count === 1) {\r\n//       const newKey = snapshot.val().length \r\n//       // const originData = snapshot.val()\r\n//       const newData = gameDataHandler(newKey)\r\n//       database.ref('/member/' + newKey).set(newData)\r\n//       window.alert('add successful~')\r\n//       return\r\n//     }\r\n//   })\r\n//   // const update = newData\r\n// } \r\n\r\n\r\nexport default class Game extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      coins: [],\r\n      gameOpen: true,\r\n      coinGenarateSpeed: 1,\r\n      coinGenState: {\r\n        lv1: 1,\r\n        lv20: 0,\r\n        lv100: 0,\r\n      }\r\n    };\r\n    this.setCanvas = el => this.canvas = el\r\n    this.myGameTest = null\r\n  }\r\n  \r\n  componentDidMount = () => {\r\n    const { coinGenarateSpeed } = this.state\r\n    this.myGameTest = idleGame(this.canvas)\r\n    this.myGameTest.init()\r\n    this.myGameTest.render()\r\n    this.obj = undefined\r\n    const originLS = localStorage.getItem('gameConfig')\r\n    const moneyBag = JSON.parse(originLS).filter(o => o.id === 2001)[0].value\r\n    this.setState({\r\n      coinGenState: {\r\n        ...this.state.coinGenState,\r\n        lv20: moneyBag,\r\n      }\r\n    })\r\n\r\n    this.addCoin(coinGenarateSpeed)\r\n\r\n    let iCount = 0\r\n    setInterval(() => {\r\n      iCount++\r\n      // if(iCount < 10) {\r\n      //   this.myGameTest\r\n      //     .setIdActions('ObjLayer', 'userCharacter', {\r\n      //       fn: 'moveByNum', parameters: [1, 1]\r\n      //     })\r\n      //     .setIdActions('ObjLayer', 'userCharacter', {\r\n      //       fn: 'changeStatus', parameters: ['another']\r\n      //     })\r\n      // } else if(iCount >= 10 && iCount < 19) {\r\n      //   this.myGameTest\r\n      //   .setIdActions('ObjLayer', 'userCharacter', {\r\n      //     fn: 'changeStatus', parameters: ['origin']\r\n      //   })\r\n      // } else {\r\n      //   iCount = 0\r\n      // }\r\n    }, 100)\r\n    // document.addEventListener('keydown', (e) => {\r\n    //   this.myGameTest\r\n    //     .setIdActions('ObjLayer', 'userCharacter', {\r\n    //       fn: 'moveByUser', parameters: [e]\r\n    //     })\r\n    //     .setIdActions('ObjLayer', 'userCharacter', {\r\n    //       fn: 'changeStatus', parameters: ['another']\r\n    //     })\r\n    // })\r\n    // document.addEventListener('keyup', (e) => {\r\n    //   this.myGameTest\r\n    //     .setIdActions('ObjLayer', 'userCharacter', {\r\n    //       fn: 'changeStatus', parameters: ['origin']\r\n    //     })\r\n    // })\r\n  }\r\n  purchaseCoinUprade = (price) => {\r\n    const { coinGenState } = this.state\r\n    // if(window.confirm('Are you sure buying the upgrade? (cost 10000)')) {\r\n      this.props.buy(price)\r\n      this.setState({\r\n        coinGenState: {\r\n          ...coinGenState,\r\n          lv20: coinGenState.lv20 + 1,\r\n        }\r\n      })\r\n      this.myGameTest.spawnObjToLayer({\r\n        layer: 'ObjLayer', \r\n        objFn: moneyBag, \r\n        pos: { useRandom: true, y: 120 },\r\n        objFnParas: [20, 20],\r\n        selfDestroy: false,\r\n        isUI: false,\r\n      })\r\n      this.myGameTest.updateStateNum('UILayer', 2001, 'text', 1)\r\n      this.myGameTest.removeObjFromLayer('UILayer', 'alertUI', 1)\r\n    // }\r\n  }\r\n  spawnCoins = (selfDestroy=false, coinCount=1) => {\r\n    const { setCoin } = this.props\r\n    setCoin(coinCount)\r\n\r\n    // console.log(this.myGameTest.myLayers.ObjLayer)\r\n    this.myGameTest.spawnObjToLayer({\r\n      layer: 'ObjLayer', \r\n      objFn: moneyUIwithText, \r\n      pos: { useRandom: true },\r\n      objFnParas: [coinCount],\r\n      selfDestroy: true,\r\n    })\r\n  }\r\n  addCoin = (speed=1) => {\r\n    const second = 2000 / speed\r\n    // setInterval(() => {\r\n    //   const { lv1, lv20, lv100 } = this.state.coinGenState\r\n    //   const coinCount = lv1 * 1 + lv20 * 6 + lv100 * 50\r\n    //   this.spawnCoins(true, coinCount)\r\n    // }, second)\r\n  }\r\n\r\n\r\n  tap = (e, canvas) => {\r\n    let tapActions = []\r\n    const addTapAction = (layer, id, cloneId, fn, allClone=false) => {\r\n      tapActions = [...tapActions, getTap(e, canvas, layer, id, cloneId, fn, allClone)]\r\n    }\r\n    \r\n    tapActionHolder(this.myGameTest).map(ac => addTapAction(ac.layer, ac.id, ac.cloneId, ac.fn, ac.allClone))\r\n\r\n    for (let i = 0; i < tapActions.length; i++) {\r\n      if(tapActions[i] !== false) {\r\n        tapActions[i]()\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  \r\n  _handleOpenGame = () => {\r\n    this.setState(state => ({\r\n      gameOpen: !state.gameOpen\r\n    }))\r\n  }\r\n  setMouseCursor= (e) => {\r\n    // this.myGameTest.setMouseCursor(e, ['bulbCurvyFlat', 'OKIcon', 'cancelIcon', 'moneyBag', 'testButton', ])\r\n  }\r\n  render() {\r\n    const { gameOpen } = this.state\r\n    // const { coin=0 } = this.props\r\n    console.log('render canvas')\r\n    return (\r\n      <div>\r\n        <button onClick={this._handleOpenGame}>Open Game</button>\r\n        {/* <button onClick={ writeNew }>Add Firebase data</button> */}\r\n          <div id={'game-canvas'} style={{ display: gameOpen ? 'block' : 'none' }} >\r\n            <canvas \r\n              ref={this.setCanvas} \r\n              width={ canvasSpec.width } \r\n              height={ canvasSpec.height } \r\n              onKeyDown={ this._handleMove }\r\n              onMouseMove={this.setMouseCursor}\r\n              onTouchStart={(e) => this.tap(e, this.canvas)} \r\n              onMouseDown={(e) => this.tap(e, this.canvas)} />\r\n            {/* <button onClick={this.spawnCoins}>Coin + 1</button> */}\r\n            {/* <div>\r\n              {HATs.map(hat => (\r\n                <img key={hat} src={hat} style={{ width: '100px' }} onClick={this._handleChangeHat} />\r\n              ))}\r\n            </div> */}\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}","export const styles = {\r\n  starBTN: {\r\n    normal: {\r\n      'backgroundColor': '#ddd',\r\n      'color': '#111'\r\n    },\r\n    active: {\r\n      'backgroundColor': '#333',\r\n      'color': '#fff'\r\n    }\r\n  }\r\n}\r\nexport const REF = 'nihongo'\r\nexport const firebaseConfig = {\r\n  apiKey: 'AIzaSyCcmyf7VijRIBE1EgkK1CDYGvcBRnz6KJc',\r\n  authDomain: 'test-253f3.firebaseapp.com',\r\n  databaseURL: 'https://test-253f3.firebaseio.com',\r\n  projectId: 'test-253f3',\r\n  storageBucket: 'test-253f3.appspot.com',\r\n  messagingSenderId: '8727978886'\r\n}","import React from 'react'\r\nimport { database } from './avatar'\r\nimport { DownloadJSONLink } from './TestPaper'\r\nimport { \r\n  setValueOfArrObj, \r\n  convertABCDtoNum,\r\n  checkAnyOfObjArrIsEmpty,\r\n  convert1234ToABCD,\r\n } from './functions'\r\nimport { HOCwithHint } from './singleQA'\r\nimport { FormattedMessage, injectIntl } from 'react-intl'\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faMinusCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { REF } from './config'\r\nlibrary.add(faMinusCircle)\r\n\r\n\r\n\r\n\r\nexport const SingleOption = ({id='option-0-0', changeFn, choice='A', value='', placeholder='option here'}) => (\r\n  <div className={'single-option-container'}>\r\n    <span>{choice}</span>\r\n    <input id={id} onChange={changeFn} value={value} placeholder={placeholder} type='text'></input>\r\n  </div>\r\n)\r\nexport const DeleteQuestion = ({id=0, deleteQuestion=()=>{}}) => (\r\n  <span name={id} onClick={deleteQuestion.bind(this, id)} className={'delete-createQA'}><FontAwesomeIcon name={id} icon={'minus-circle'} /></span>\r\n)\r\nexport const DeleteQuestionWithHint = HOCwithHint(DeleteQuestion, 'Delete This Question', 'delete-createQA')\r\n\r\n\r\nexport class SingleCreateQA extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n  render() {\r\n    const { id, question, options, changeFn, deleteQuestion } = this.props\r\n    return (\r\n      <form onChange={changeFn} className='single-QA' id={id}>\r\n        <h3 className='single-createQA-title'>Question {id + 1} </h3>\r\n        <DeleteQuestionWithHint id={id} deleteQuestion={deleteQuestion}  />\r\n        <textarea value={question} id={'question-' + id} onChange={changeFn}></textarea>\r\n        <h3>Options</h3>\r\n        {options.map(op => (\r\n          <SingleOption key={`a-${id}-${op.id}`} id={`option-${id}-${op.id}`} choice={op.choice} value={op.option} changeFn={changeFn}/>\r\n        ))}\r\n      <hr />\r\n      </form>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\n\r\nclass CreateQAPanel extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.qaPlate = (idNum=0) => ({id: idNum, question: '', correctAnswer:'', options: [\r\n      {id: 0, choice: 'A', option: ''},\r\n      {id: 1, choice: 'B', option: ''},\r\n      {id: 2, choice: 'C', option: ''},\r\n      {id: 3, choice: 'D', option: ''},\r\n    ]})\r\n    this.state = {\r\n      createQAData: [this.qaPlate()],\r\n      database: '',\r\n      lastIdOfOldData: 0,\r\n      answer: '',\r\n      resultJSON: [{}],\r\n    }\r\n  }\r\n  componentDidUpdate = (prevProps) => {\r\n    if(prevProps.oldData !== this.props.oldData) {\r\n      const { oldData=[{id: -1}] } = this.props\r\n      this.setState({\r\n        lastIdOfOldData: oldData[oldData.length - 1].id + 1\r\n      })\r\n    }\r\n  }\r\n  componentDidMount = () => {\r\n    const getTempSave = localStorage.getItem('tempSave')\r\n    if(getTempSave) {\r\n      this.setState({\r\n        createQAData: JSON.parse(getTempSave),\r\n      })\r\n    } else {\r\n      localStorage.setItem('tempSave', '')\r\n    }\r\n  }\r\n  \r\n  _handleChange = (e) => {\r\n    const { id, value } = e.target\r\n    const { createQAData } = this.state\r\n    let data;\r\n    if(id.search(/question-/gi) !== -1) {\r\n      const ID = id.slice(9) * 1\r\n      data = setValueOfArrObj(createQAData, ID, 'question', value)\r\n    } else if (id.search(/option-/gi) !== -1) {\r\n      const dataID = id.split('-')[1] * 1\r\n      const optionID = id.split('-')[2] * 1\r\n      const optionData = setValueOfArrObj(createQAData[dataID].options, optionID, 'option', value)\r\n      data = setValueOfArrObj(createQAData, dataID, 'options', optionData)\r\n    }\r\n    localStorage.setItem('tempSave', JSON.stringify(data))\r\n    this.setState({\r\n      createQAData: data,\r\n    })\r\n  }\r\n  _handleChangeDatabaseName = (e) => {\r\n    const { value } = e.target\r\n    this.setState({\r\n      database: value,\r\n    })\r\n  }\r\n  _handleAddQuestion = () => {\r\n    const { createQAData } = this.state\r\n    const latestData = [\r\n      ...createQAData, \r\n      this.qaPlate(createQAData[createQAData.length - 1].id + 1)\r\n    ]\r\n    this.setState({\r\n      createQAData: latestData,\r\n    })\r\n    this.bottom.scrollIntoView({behavior: 'smooth'})\r\n  }\r\n  _handleDeleteQuestion = (id) => {\r\n    // const name = e.target.getAttribute('name')\r\n    // console.log(name)\r\n    const { createQAData } = this.state\r\n    const afterThisData = createQAData.filter(c => c.id > id * 1)\r\n    const afterDataMinusOne = afterThisData.map(af => af = {...af, id: af.id - 1})\r\n    const beforeThisData = createQAData.filter(c => c.id < id * 1)\r\n    if(createQAData.length > 1) {\r\n      if(!beforeThisData) {\r\n        this.setState({\r\n          createQAData: [...afterDataMinusOne],\r\n        })\r\n      } else if(!afterThisData) {\r\n        this.setState({\r\n          createQAData: [...beforeThisData],\r\n        })\r\n      } else {\r\n        this.setState({\r\n          createQAData: [...beforeThisData, ...afterDataMinusOne],\r\n        })\r\n      }\r\n    }\r\n  }\r\n  _handleChangeAnswer = (e) => {\r\n    const { value } = e.target\r\n    const { answer } = this.state\r\n    const valueWithCovert = convert1234ToABCD(value) ? convert1234ToABCD(value).toUpperCase() : value.toUpperCase()\r\n    const valueLength = valueWithCovert.length\r\n    const lengthCondition = (valueLength - 6)\r\n    let handledValue = answer\r\n    \r\n    if(valueLength > answer.length && valueWithCovert.search(/[a|b|c|d]$/gi, '') !== -1) {\r\n      handledValue = lengthCondition % 6 === 0 ? \r\n        valueWithCovert.slice(0, valueLength - 1) \r\n          + '\\n' \r\n          + valueWithCovert.slice(valueLength - 1) : \r\n        valueWithCovert\r\n    } else if(valueLength < answer.length) {\r\n      handledValue = valueWithCovert\r\n    }\r\n    this.setState({\r\n      answer: handledValue,\r\n    })\r\n  }\r\n  _resetCreateQA = () => {\r\n    if(window.confirm('Are you sure deleting these QA?')) {\r\n      localStorage.setItem('tempSave', '')\r\n    }\r\n  }\r\n  _checkAmoutOfQA = (e) => {\r\n    const { answer, createQAData } = this.state\r\n    const { oldData=[] } = this.props\r\n    const answerLength = answer.replace(/\\n/gi, '').length\r\n    // e.preventDefault()\r\n\r\n    if(answerLength !== createQAData.length) {\r\n      console.log(answerLength, createQAData.length)\r\n      e.preventDefault()\r\n      window.alert('題數與解答的數量不符~')\r\n    } else if(checkAnyOfObjArrIsEmpty(createQAData.map(c => c = {...c , correctAnswer: 'mockAnswer'})) === false) {\r\n      e.preventDefault()\r\n      console.log(createQAData)\r\n      window.alert('題目或是選項還有未填寫的喔～')\r\n    }else {\r\n      this.props.setCoin(createQAData.length * 100)\r\n      const res = [...oldData, ...this.convertDataToJSON(createQAData)]\r\n      this.setState({\r\n        resultJSON: res,\r\n      })\r\n      database.ref(REF).set(res)\r\n      window.alert('database have been updated')\r\n    }\r\n    \r\n  }\r\n  convertDataToJSON = (objArr) => {\r\n    const { lastIdOfOldData, answer, database } = this.state\r\n    const resultPlusLastId = objArr.map(ob => ob = {...ob, id: (ob.id + lastIdOfOldData),})\r\n    const result = resultPlusLastId.map(re => re = {...re, options: re.options.map(op => op = op.option)})\r\n    let addAnswerResult = []\r\n    const answerArr = answer.replace(/[\\n]/gi, '').split('').map(a => a = convertABCDtoNum(a))\r\n    console.log(answerArr)\r\n    for (let i = 0; i < answerArr.length; i++) {\r\n      addAnswerResult[i] = { \r\n        ...result[i], \r\n        databaseSort: database || '未分類',\r\n        correctAnswer: result[i].options[answerArr[i]],\r\n       }\r\n    }\r\n    console.log(addAnswerResult)\r\n    return addAnswerResult\r\n  }\r\n  render() {\r\n    const { createQAData, answer } = this.state\r\n    // const { oldData=[] } = this.props\r\n    const answerLength = answer.replace(/[\\n]/gi, '').length\r\n    const compareAnsAndQuestionLength = () => {\r\n      if(answerLength > createQAData.length) {\r\n        return 'more than ans'\r\n      } else if (answerLength < createQAData.length) {\r\n        return 'less than ans'\r\n      } return 'No problem~'\r\n    }\r\n    return (\r\n      <div>\r\n        <div id='createQaArea' className='clearfix'>\r\n          <FormattedMessage \r\n            id={'createQA.bigTitle'} \r\n            tagName={'h2'}\r\n            values={{ someone: 'Hellen' }}\r\n          />\r\n          <hr />\r\n          <div className='createQA-container question'>\r\n            <h4>Your Database Name:</h4>\r\n            <input \r\n              type='text'\r\n              className='database-input' \r\n              onChange={this._handleChangeDatabaseName} \r\n              value={this.database}\r\n              placeholder={this.props.intl.formatMessage({\r\n                id: 'createQA.databaseName'\r\n              })} />\r\n              <hr />\r\n            {createQAData.map(cr => (\r\n              <SingleCreateQA \r\n                key={'form' + cr.id}\r\n                id={cr.id}\r\n                question={cr.question}\r\n                options={cr.options}\r\n                changeFn={this._handleChange}\r\n                deleteQuestion={this._handleDeleteQuestion}\r\n              />\r\n            ))}\r\n            <button onClick={this._handleAddQuestion}>\r\n              <FontAwesomeIcon icon='plus-circle' />\r\n            </button>\r\n          </div>\r\n          <div className='createQA-container answer' ref={el => this.answerContainer = el}>\r\n            <h3>Correct Answer</h3>\r\n            {/* <br /> */}\r\n            <span>{answerLength}個答案</span>\r\n            <span>{'(' + compareAnsAndQuestionLength()}</span>\r\n            <textarea onChange={this._handleChangeAnswer} value={answer}></textarea>\r\n          </div>\r\n          <div className='createQA-container' >\r\n            <hr />\r\n            <button>\r\n              <DownloadJSONLink obj={ this.state.resultJSON } clickFn={this._checkAmoutOfQA} />\r\n            </button>\r\n            <button onClick={this._resetCreateQA}>Reset QAs</button>\r\n          </div>\r\n        </div>\r\n        <div ref={el => this.bottom = el} style={{ width: '100px', height: '20px' }}></div>\r\n      </div>);\r\n  }\r\n}\r\nexport default injectIntl(CreateQAPanel)","/* eslint-disable no-unused-vars */\r\nimport React from 'react'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport { convertSecToMin } from './functions'\r\nimport { withStyles } from '@material-ui/core'\r\n\r\nconst styles = {\r\n  button: {\r\n    display: 'inline-block',\r\n    margin: '0px 10px',\r\n    verticalAlign: 'top',\r\n  },\r\n  paper: {\r\n    width: '300px',\r\n    padding: '10px',\r\n    margin: 'auto',\r\n    textAlign: 'center',\r\n  },\r\n  timer: {\r\n    display: 'inline-block'\r\n  }\r\n}\r\n\r\n\r\nclass Timer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isStart: false,\r\n      isCountDown: false,\r\n      time: 3,\r\n    }\r\n    this.timer = null\r\n  }\r\n  componentWillMount = () => {\r\n    this.resetTime()\r\n  }\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if(prevProps.isStart !== this.props.isStart) {\r\n      this._handleTimerStartPause()\r\n    }\r\n    if(prevProps.isHandIn !== this.props.isHandIn) {\r\n      this.resetTime()\r\n    }\r\n  }\r\n  resetTime = () => {\r\n    this.setState({\r\n      time: this.props.time\r\n    })\r\n  }\r\n  timerFn = () => {\r\n    const { time, overAndCheckAns, timerStartPause } = this.props\r\n    this.timer = setInterval(() => {\r\n      if(this.state.time > 0) {\r\n        this.setState({\r\n          time: this.state.time - 1,\r\n        })\r\n      }\r\n      else {\r\n        this.setState({\r\n          isStart: false,\r\n          time: time,\r\n        })\r\n        timerStartPause()\r\n        overAndCheckAns(true)\r\n        clearInterval(this.timer)\r\n      }\r\n      console.log('timer on')\r\n    }, 1000)\r\n  }\r\n  _handleTimerStartPause = () => {\r\n    const { isStart } = this.props\r\n    if(isStart) {\r\n      this.timerFn()\r\n    } else {\r\n      clearInterval(this.timer)\r\n    }\r\n  }\r\n  render() {\r\n    const { time } = this.state\r\n    const { isStart, timerStartPause, classes, } = this.props\r\n    return (\r\n      <div>\r\n        <Paper elevation={1} className={classes.paper}>\r\n          <Button\r\n            variant='contained' \r\n            color={isStart ? 'primary' : 'default'} \r\n            aria-label={'start'} \r\n            className={classes.button}\r\n            onClick={timerStartPause}\r\n          >\r\n            {isStart ? 'Pause' : 'Start' }\r\n          </Button>\r\n          <Typography className={classes.timer}  variant='h4' component='h3' >\r\n            {convertSecToMin(time)[0] + ' : ' + convertSecToMin(time)[1]}\r\n          </Typography>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withStyles(styles)(Timer)","export const en_US = {\r\n  hello: 'Hello~',\r\n  superHello: 'Hello, { someone } !',\r\n  createQA: {\r\n    bigTitle: 'Create Your Own Questions And Answers'\r\n  },\r\n  'createQA.bigTitle': 'Create Your Own Questions And Answers',\r\n  'createQA.databaseName': 'please input your database name, or it will set to \"undefined\"',\r\n}\r\nexport const zh_TW = {\r\n  hello: '你好!',\r\n  superHello: '你好, { someone } !',\r\n  'createQA.bigTitle': '創建你的題目',\r\n  'createQA.databaseName': '填入題庫名稱，如不填則預設為\"未分類\"',\r\n}","import React from 'react'\nimport { Box } from '@material-ui/core'\n\nconst HiddenTestPaper = () => {\n  return (\n    <Box\n      className={'test-paper'}\n      padding={2}\n      // maxWidth={300}\n      style={{\n        // backgroundColor: '#ddd'\n      }}\n    >\n      {'點擊Start 或 從頭開始出題'}\n    </Box>\n  )\n}\n\nexport default HiddenTestPaper","import React from 'react'\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faStar, faEdit, faArrowRight, faPlusCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { \r\n  getAllOrStarData,\r\n  setValueOfArrObj,\r\n  activeButton,\r\n  filterArrWithProperty,\r\n  filterArrObjWithArr,\r\n  getNoSameArr,\r\n  } from './functions'\r\nimport { WholeTestPaper, SingleTestPaper } from './TestPaper'\r\nimport { SelectMenuBar } from './selectDatabase'\r\nimport CreateQAPanel from './createQA'\r\nimport Timer from './Timer'\r\nimport Game, { database } from './avatar'\r\nimport { REF } from './config'\r\n\r\n\r\nimport { en_US, zh_TW } from './lang'\r\nimport { IntlProvider, FormattedMessage } from 'react-intl'\r\n// import en from 'react-intl/locale-data/en';\r\n// import zh from 'react-intl/locale-data/zh'\r\nimport './styles/style.scss'\r\nimport HiddenTestPaper from './game/components/HiddenTestPaper'\r\nimport { Box } from '@material-ui/core'\r\n// addLocaleData([...en,...zh])\r\n\r\nlibrary.add(faStar, faEdit, faArrowRight, faPlusCircle)\r\n\r\nconst QAfileDir = 'https://raw.githubusercontent.com/ms0223900/testBattle/master/QAfiles/Nihongo.json'\r\nconst intervalBetweenQuestions = 1000\r\nconst testTime = 300\r\nconst coinImg = 'https://cdn3.iconfinder.com/data/icons/supermario/PNG/Retro-Coin.png'\r\n\r\nexport const getRandomId = (prevId=0) => {\r\n  let id = Math.random()\r\n  while(id === prevId) {\r\n    id = Math.random()\r\n  }\r\n  return id\r\n}\r\nexport const getDataByMode = (testMode='all', testAmount=5, testQAData=[], ) => {\r\n  const recordFromLS = JSON.parse(localStorage.getItem('starAndNote')) || [{}]\r\n  let recordQuestions = recordFromLS ? recordFromLS : []\r\n  const filterWithRecordArr = filterArrWithProperty(testQAData, recordQuestions, 'id')\r\n\r\n  switch (testMode) {\r\n    case 'star':\r\n      return getAllOrStarData(true, testAmount, testQAData, true)\r\n    case 'all':\r\n      return getAllOrStarData(false, testAmount, testQAData, true)\r\n    case 'notSame': {\r\n      const filteredTestQAByRecord = filterArrObjWithArr(testQAData, filterWithRecordArr, 'id', true)\r\n      console.log(filteredTestQAByRecord)\r\n      return getAllOrStarData(false, testAmount, filteredTestQAByRecord, true)\r\n    }\r\n    default:\r\n      return getAllOrStarData(false, testAmount, testQAData, true)\r\n  }\r\n}\r\nexport const filterCorrectAns = (ans) => (\r\n  ans.map(a => a = {...a, checked: a.answer === a.correctAnswer ? true : false })\r\n)\r\nexport const getFetchQA = (QAfile) => (\r\n  fetch(QAfile)\r\n  .then(txt => txt.json())\r\n  .then(json => new Promise(\r\n    res => res(json),\r\n    rej => console.log(rej)\r\n  ))\r\n  .catch(err => {})\r\n)\r\n\r\n\r\nexport const ChangeModeBTN = ({ id, clickFn, stateOfMode, btnText='', filterText='' }) => {\r\n  const text = filterText === '' ? id : id.replace(filterText, '')\r\n  return (\r\n    <button \r\n      id={id} \r\n      style={activeButton(stateOfMode, text)}\r\n      onClick={clickFn} >\r\n      {btnText}\r\n    </button>\r\n  )\r\n}\r\nexport const TabMenu = ({testModeState, testModeFn, answerModeState, answerModeFn, testAmount, changeAmountFn}) => (\r\n  <div>\r\n    <ChangeModeBTN id={'all'} clickFn={testModeFn} stateOfMode={testModeState} btnText={'從全部考題隨機出題'}  />\r\n    <ChangeModeBTN id={'notSame'} clickFn={testModeFn} stateOfMode={testModeState} btnText={'從沒出過的考題隨機出題'}  />\r\n    <ChangeModeBTN id={'star'} clickFn={testModeFn} stateOfMode={testModeState} btnText={'從收藏出題'}  />\r\n    <span>   </span>\r\n    <input type='number' value={ testAmount } onChange={changeAmountFn} />\r\n    <Box\r\n      paddingY={2}\r\n    >\r\n      <ChangeModeBTN id={'answer-single'} clickFn={answerModeFn} stateOfMode={answerModeState} btnText={'單題模式'} filterText={'answer-'} />\r\n      <ChangeModeBTN id={'answer-all'} clickFn={answerModeFn} stateOfMode={answerModeState} btnText={'試卷模式'} filterText={'answer-'} />\r\n    </Box>\r\n  </div>\r\n)\r\n\r\n\r\nexport default class App extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      myAnswer: [{ }],\r\n      isHandIn: false,\r\n      isCheckCorrectAns: false,\r\n      isStart: false,\r\n      time: 300,\r\n      coin: 0,\r\n      allTestQA: [],\r\n      filterAllTestQA: [],\r\n      testRecord:[],\r\n      allTestFilterConditions: [],\r\n      nowFIlterCondition: [],\r\n      testQA: [],\r\n      testAmount: 10,\r\n      testMode: 'all',\r\n      answerMode: 'single',\r\n      singleAnswerModeState: {\r\n        index: 0,\r\n        idArr: []\r\n      },\r\n      keyId: 0,\r\n      viewMyNote: false,\r\n      noteContent: '',\r\n    }\r\n    this.testRecordTemp = [{\r\n      testId: 0,\r\n      testDataRecord: { \r\n        idArr: [0], \r\n        ansArr: [ {answer: 'A', correctAnswer: ''} ] , \r\n      }\r\n    }]\r\n    this.noteArea = null\r\n  }\r\n  componentWillMount = () => {\r\n    // const updateFromLS_QAs = QAs.map(qa => qa = qa)\r\n\r\n    database.ref(REF).on('value', data => {\r\n      const LSdata = JSON.parse(localStorage.getItem('starAndNote'))\r\n      let setData = data.val()\r\n      if(LSdata) {\r\n        for (let i = 0; i < LSdata.length; i++) {\r\n          setData = setValueOfArrObj(setData, LSdata[i].id, 'star', LSdata[i].star)\r\n        }\r\n      }\r\n      const Q = setData.map(q => q = {\r\n        id: q.id, \r\n        answer: '', \r\n        correctAnswer: q.correctAnswer, \r\n        checked: 'notYet',\r\n      })\r\n      this.setState({\r\n        allTestQA: setData,\r\n        filterAllTestQA: setData,\r\n        myAnswer: Q,\r\n        allTestFilterConditions: getNoSameArr(setData.map(s => s = s.databaseSort || ''))\r\n      })\r\n      console.log(getNoSameArr(setData.map(s => s = s.databaseSort || '')))\r\n    })\r\n    \r\n   \r\n    if(!localStorage.getItem('noteContent')) {\r\n      localStorage.setItem('noteContent', '')\r\n    }\r\n    if(!localStorage.getItem('coin')) {\r\n      localStorage.setItem('coin', 0)\r\n    }\r\n    const coin = localStorage.getItem('coin') * 1\r\n    const latestNoteContent = localStorage.getItem('noteContent')\r\n    this.setState({\r\n      noteContent: latestNoteContent,\r\n      coin: coin,\r\n    })\r\n  }\r\n  setTestRecord = () => {\r\n    const { testRecord, testQA, myAnswer } = this.state\r\n    const lastRecord = testRecord[testRecord.length - 1]\r\n    const checkedAnswer = filterCorrectAns(myAnswer)\r\n    this.setState({\r\n      testRecord: [...testRecord, {\r\n        testId: testRecord.length === 0 ? 0 : lastRecord.testId + 1,\r\n        testDataRecord: { \r\n          idArr: [...testQA.map(te => te = te.id)], \r\n          ansArr: [ ...checkedAnswer ], \r\n        }\r\n      }],\r\n    })\r\n  }\r\n  _handleSetCoin = (coin) => {\r\n    const { coin: originCoin } = this.state\r\n    const resultCoin = originCoin * 1 + coin\r\n    localStorage.setItem('coin', resultCoin)\r\n    this.setState({\r\n      coin: resultCoin,\r\n    })\r\n  }\r\n  _handleChangeAnswerMode = (e, state) => {\r\n    const { id } = e.target\r\n    const mode = id.replace('answer-', '')\r\n    this.setState({\r\n      answerMode: mode,\r\n      // testQA: [],\r\n    })\r\n  }\r\n  \r\n  _handleOpenNote = () => {\r\n    if(this.state.isHandIn) {\r\n      this.setState(state => ({\r\n        viewMyNote: !state.viewMyNote,\r\n      }))\r\n    }\r\n    // console.log(this.state.viewMyNote)\r\n  }\r\n  _handleChangeNote = (e) => {\r\n    const { value } = e.target\r\n    this.setState({\r\n      noteContent: value\r\n    })\r\n    localStorage.setItem('noteContent', value)\r\n  }\r\n  _handleChangeMode = (e) => {\r\n    const { id } = e.target\r\n    if(id !== this.state.testMode) {\r\n      this.setState({\r\n        testMode: id,\r\n      })\r\n    }\r\n  }\r\n  _handleTestPaper = () => {\r\n    const { testMode, testAmount, filterAllTestQA, myAnswer } = this.state\r\n    // if(this.testPaper) {\r\n    //   this.setState({ \r\n    //     myAnswer: myAnswer.map(a => a = {\r\n    //        ...a, \r\n    //        answer: '',\r\n    //        checked: 'notYet'\r\n    //     }),\r\n    //   })\r\n    // }\r\n    const testQAdata = getDataByMode(testMode, testAmount, filterAllTestQA)\r\n    this.setState(state =>({\r\n      isHandIn: false,\r\n      isStart: true,\r\n      time: testTime,\r\n      isCheckCorrectAns: false,\r\n      keyId: getRandomId(state.keyId), \r\n      testQA: testQAdata,\r\n      myAnswer: myAnswer.map(my => my = { ...my,  \r\n        answer: '', checked: 'notYet', }),\r\n      singleAnswerModeState: {\r\n        index: 0,\r\n        idArr: testQAdata.map(t => t = t.id),\r\n      }\r\n    }))\r\n  }\r\n  _handleCheckAnswer = (isOver=false) => {\r\n    const { isHandIn, testQA, myAnswer, answerMode, singleAnswerModeState, testRecord, isStart } = this.state\r\n    const singleAnswerModeId = singleAnswerModeState.idArr[singleAnswerModeState.index]\r\n    \r\n    console.log(testRecord.length)\r\n    let checkedAnswer\r\n    if(!isHandIn) {\r\n      if(answerMode === 'all') { \r\n        checkedAnswer = filterCorrectAns(myAnswer)\r\n        this.setState({\r\n          isHandIn: true,\r\n          isStart: false,\r\n          myAnswer: checkedAnswer,\r\n        })\r\n        this.setTestRecord()\r\n      } else if(answerMode === 'single') {\r\n        if(singleAnswerModeState.index < singleAnswerModeState.idArr.length) {\r\n          checkedAnswer = isOver ? \r\n            filterCorrectAns(myAnswer) : \r\n            [ ...myAnswer.filter(m => m.id !== singleAnswerModeId ), filterCorrectAns(myAnswer.filter(m => m.id === singleAnswerModeId ))[0] ]\r\n          this._handleToNextQuestion(isOver)\r\n          this.setState({\r\n            myAnswer: checkedAnswer,\r\n            isHandIn: isOver ? !isHandIn : isHandIn\r\n          })\r\n        }\r\n      }\r\n    } \r\n    \r\n  }\r\n  _handleChangeAnswer = (e) => {\r\n    const { myAnswer, isHandIn } = this.state\r\n    const { name, value } = e.target\r\n    console.log(e.target.getAttribute('answer'))\r\n    // console.log(answer)\r\n    const changedAns = setValueOfArrObj(myAnswer, name, 'answer', value)\r\n    console.log(changedAns)\r\n    if(!isHandIn) {\r\n      this.setState({\r\n        myAnswer: changedAns\r\n      })\r\n    }\r\n  }\r\n  _handleChangeAmout = (e) => {\r\n    this.setState({\r\n      testAmount: e.target.value\r\n    })\r\n  }\r\n  _handleCheckCorrectAnswer = () => {\r\n    this.setState(state => ({\r\n      isCheckCorrectAns: !state.isCheckCorrectAns,\r\n    }))\r\n  }\r\n  _handleToNextQuestion = (isOver=false) => {\r\n    const { singleAnswerModeState } = this.state\r\n    setTimeout(() => {\r\n      const nextIndex = isOver ? singleAnswerModeState.idArr.length : singleAnswerModeState.index + 1\r\n      if(nextIndex > singleAnswerModeState.idArr.length - 1) {\r\n        this.setState({\r\n          isHandIn: true,\r\n          isStart: false,\r\n        })\r\n        this.setTestRecord()\r\n      } else {\r\n        this.setState({\r\n          singleAnswerModeState: {\r\n            ...singleAnswerModeState,\r\n            index: nextIndex,\r\n          }\r\n        })\r\n      }\r\n    }, intervalBetweenQuestions);\r\n    \r\n    console.log(this.state.singleAnswerModeState.index)\r\n  }\r\n  _handleChangeSelectDatabase = (e) => {\r\n    const { nowFIlterCondition, allTestQA, filterAllTestQA } = this.state\r\n    const { value } = e.target\r\n    const result = [...nowFIlterCondition, value]\r\n    const singleFilterResult = allTestQA.filter(a => a.databaseSort === value)\r\n    const testFilterResult = nowFIlterCondition.length === 0 ? singleFilterResult :  [...filterAllTestQA , ...singleFilterResult]\r\n\r\n    if(nowFIlterCondition.indexOf(value) === -1) {\r\n      this.setState(state => ({\r\n        nowFIlterCondition: result,\r\n        filterAllTestQA: testFilterResult,\r\n      }))\r\n    }\r\n  }\r\n  _handleDeleteSelectDatabase = (e) => {\r\n    const { allTestQA, nowFIlterCondition, filterAllTestQA } = this.state\r\n    const name = e.target.getAttribute('name')\r\n    const deletedArr = nowFIlterCondition.filter(s => s !== name)\r\n    const testFilterResult = filterAllTestQA.filter(f => f.databaseSort !== name)\r\n    const filterResult = testFilterResult.length === 0 ? allTestQA : testFilterResult\r\n    this.setState({\r\n      nowFIlterCondition: deletedArr,\r\n      filterAllTestQA: filterResult,\r\n    })\r\n  }\r\n  _handleViewTestRecord = (e) => {\r\n    const { allTestQA, testRecord } = this.state\r\n    const thatId = e.target.getAttribute('name') * 1\r\n    const filterRecord = testRecord.filter(te => te.testId === thatId)[0]\r\n    console.log(filterRecord)\r\n    this.setState({\r\n      answerMode: 'all',\r\n      testQA: filterArrObjWithArr(allTestQA, filterRecord.testDataRecord.idArr, 'id'),\r\n      myAnswer: filterRecord.testDataRecord.ansArr,\r\n      isHandIn: true,\r\n    })\r\n  }\r\n  _handleTimerStart = () => {\r\n    const { isStart, isHandIn, testQA } = this.state\r\n    if(testQA.length > 0 && !isHandIn) {\r\n      this.setState({\r\n        isStart: !isStart,\r\n      })\r\n    }\r\n  }\r\n  _handleBuying = (price=10) => {\r\n    const resCoin = this.state.coin - price\r\n    if(resCoin > 0) {\r\n      this.setState({\r\n        coin: resCoin\r\n      })\r\n      return true\r\n    } else {\r\n      window.alert('money is not enough~')\r\n      return false\r\n    }\r\n  }\r\n  render() {\r\n    const { myAnswer, isHandIn, testAmount, keyId, testQA=[], viewMyNote, noteContent, isCheckCorrectAns, answerMode, singleAnswerModeState, testMode, allTestFilterConditions, nowFIlterCondition, testRecord, isStart, time, coin } = this.state\r\n    return (\r\n      <div>\r\n        <div className='tab-menu'>\r\n          <div>\r\n            <h3>選擇題庫</h3>\r\n            <SelectMenuBar \r\n              allTestFilterConditions={allTestFilterConditions} \r\n              nowFIlterCondition={nowFIlterCondition} \r\n              changeSelectDatabase={this._handleChangeSelectDatabase} \r\n              deleteSelectDatabase={this._handleDeleteSelectDatabase} \r\n            />\r\n            <TabMenu\r\n              testModeState={testMode}\r\n              testModeFn={this._handleChangeMode}\r\n              answerModeState={answerMode}\r\n              answerModeFn={this._handleChangeAnswerMode}\r\n              testAmount={testAmount}\r\n              changeAmountFn={this._handleChangeAmout}\r\n            />\r\n            <button onClick={this._handleTestPaper}>出題！！</button>\r\n          </div>\r\n          <div>\r\n            <button onClick={this._handleOpenNote}>查看我的筆記</button>\r\n          </div>\r\n          <div>\r\n            <img className={'coin-img'} src={coinImg} />\r\n            <span> {' X ' + coin} </span>\r\n          </div>\r\n        </div>\r\n        <hr />\r\n\r\n        <Timer \r\n            time={time} \r\n            isStart={isStart} \r\n            isHandIn={isHandIn}\r\n            timerStartPause={this._handleTimerStart}\r\n            overAndCheckAns={this._handleCheckAnswer}\r\n          />\r\n        <div className='test-paper-container'>\r\n          { isStart || isHandIn ? answerMode === 'single' ? (\r\n            <SingleTestPaper\r\n              key={keyId} \r\n              testQA={testQA} \r\n              myAnswer={myAnswer} \r\n              isHandIn={isHandIn} \r\n              isCheckCorrectAns={isCheckCorrectAns}\r\n              changeAnswer={this._handleChangeAnswer}\r\n              checkAnswer={this._handleCheckAnswer.bind(this, false)}\r\n              checkCorrectAnswer={this._handleCheckCorrectAnswer}\r\n              singleAnswerModeState={singleAnswerModeState}\r\n            />\r\n          ) : (\r\n            <WholeTestPaper\r\n              key={keyId} \r\n              testQA={testQA} \r\n              myAnswer={myAnswer} \r\n              isHandIn={isHandIn} \r\n              isCheckCorrectAns={isCheckCorrectAns}\r\n              changeAnswer={this._handleChangeAnswer}\r\n              checkAnswer={this._handleCheckAnswer}\r\n              checkCorrectAnswer={this._handleCheckCorrectAnswer} \r\n            />\r\n          ) : (\r\n            <HiddenTestPaper />\r\n          )}\r\n        </div>\r\n        <div className='test-record-container'>\r\n          {testRecord.map(te => (\r\n            <div onClick={this._handleViewTestRecord} name={te.testId} key={te.testId}>{'test record ' + te.testId}</div>\r\n          ))}\r\n        </div>\r\n        <CreateQAPanel \r\n          setCoin={this._handleSetCoin}\r\n          oldData={this.state.allTestQA} \r\n        />\r\n        <div id='myNote' style={{ display: viewMyNote ? 'block' : 'none' }}>\r\n          <h2>My Note  \r\n            <span className='back-icon' onClick={this._handleOpenNote}><FontAwesomeIcon icon={'arrow-right'} /></span>\r\n          </h2>\r\n          <textarea onChange={this._handleChangeNote} placeholder='write your note here~' value={noteContent} ref={el => this.noteArea = el}>\r\n\r\n          </textarea>\r\n        </div>\r\n        {/* <Game \r\n          // coin={coin}\r\n          buy={this._handleBuying}\r\n          setCoin={this._handleSetCoin}\r\n        /> */}\r\n        <button onClick={this.props.changeLang}>Change Lang</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport class HOCIntlApp extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lang: 'zh',\r\n    };\r\n  }\r\n  chooseLang = (lang) => {\r\n    switch (lang) {\r\n      case 'en':\r\n        return en_US\r\n      case 'zh':\r\n        return zh_TW\r\n      default:\r\n        return en_US\r\n    }\r\n  }\r\n  _handleChangeLang = () => {\r\n    this.setState({\r\n      lang: this.state.lang === 'en' ? 'zh' : 'en'\r\n    })\r\n  }\r\n  render() {\r\n    const { lang } = this.state\r\n    return (\r\n      <IntlProvider locale={lang} key={lang} messages={this.chooseLang(lang)}>\r\n        <App changeLang={this._handleChangeLang}/>\r\n      </IntlProvider>\r\n    );\r\n  }\r\n}\r\n// export const HOCApp = <HOCIntlApp></HOCIntlApp>","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HOCIntlApp } from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HOCIntlApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}